(()=>{function F(r){let d=r.length;if(d>65536)throw new Error("TOO_MANY_FILES");let u=6+16*d,m=u;for(let b of r)m+=b.bytes.byteLength;let A=new Uint8Array(m);A.set([0,0,1,0,...N(d)],0);let s=u;for(let b=0;b<r.length;b++){let L=6+16*b,h=r[b],S=h.width,I=h.height;if(S>256||I>256)throw new Error("INVALID_SIZE");A.set([S,I,0,0,0,0,...h.bpp?N(h.bpp):[0,0],...H(h.bytes.byteLength),...H(s)],L),A.set(new Uint8Array(h.bytes),s),s+=h.bytes.byteLength}return A}function N(r){return[r&255,r>>8&255]}function H(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]}function D(r){let d=8;for(let s of r)d+=8+s.bytes.byteLength;let u=new Uint8Array(d),m=0,A=s=>{u.set(s,m),m+=Array.isArray(s)?s.length:s.byteLength};A([105,99,110,115,...k(u.byteLength)]);for(let s of r){let b=s.type.split("").map(L=>L.charCodeAt(0));if(b.length!==4)throw new Error("Input type must have exactly 4 chars, got "+s.type);A([...b,...k(s.bytes.byteLength+8)]),A(new Uint8Array(s.bytes))}return u}function k(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function E(r){let d=[],u=r.byteLength;for(let m=0;m<u;m++)d.push(String.fromCharCode(r[m]));return window.btoa(d.join(""))}function Z(r){document.readyState!=="loading"?r():document.addEventListener("DOMContentLoaded",r)}Z(()=>{let r=fish("#arrow-input"),d=fish("#arrow"),u=fish("#logo-bg-input"),m=fish("#logo-bg"),A=fish("#reset-button"),s=fish("#color-presets"),b=fish("#randomize-button"),L=document.querySelector("#custom-logo"),h=new Image;function S(){let n=new XMLSerializer().serializeToString(L);h.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}function I(e,n){let t=document.createElement("a");t.href=e,t.download=n,t.click()}function v(e,n=0){let t=document.createElement("canvas");t.width=e,t.height=e;let a=t.getContext("2d");return a.clearRect(0,0,e,e),a.drawImage(h,n,n,e-n*2,e-n*2),{canvas:t,ctx:a}}function G(e,n=0){return v(e,n).canvas.toDataURL("image/png")}function z(e,n=0){return v(e,n).ctx.getImageData(0,0,e,e).data}function P(e,n=0){let a=G(e,n).match(/^data:([\w/\-.]+);base64,(.*)/);return J(a[2])}function O(){let e=[];for(let t of[256,48,32,16]){let a=P(t);e.push({bytes:a,width:t,height:t})}let n=F(e);return`data:image/x-icon;base64,${E(n)}`}function K(){let e=[];for(let{type:t,mask:a,size:i,inset:f}of[{type:"is32",mask:"s8mk",size:16,inset:!1},{type:"il32",mask:"l8mk",size:32,inset:!1},{type:"it32",mask:"t8mk",size:128,inset:!0}]){let l=new Uint8Array(z(i,f?i*3/32:0)),o=i*i,g=new Uint8Array(o),c=new Uint8Array(o),p=new Uint8Array(o),y=new Uint8Array(o);for(let M=0;M<o;M++)g[M]=l[M*4],c[M]=l[M*4+1],p[M]=l[M*4+2],y[M]=l[M*4+3];g=x(g),c=x(c),p=x(p);let C=0;t==="it32"&&(C=4);let T=new Uint8Array(C+g.byteLength+c.byteLength+p.byteLength);T.set(g,C),T.set(c,C+g.byteLength),T.set(p,C+g.byteLength+c.byteLength),e.push({bytes:T,type:t}),e.push({bytes:y,type:a})}for(let{type:t,size:a}of[{type:"ic08",size:256},{type:"ic09",size:512}]){let i=P(a,a*3/32);e.push({bytes:i,type:t})}let n=D(e);return`data:image/x-icns;base64,${E(n)}`}S(),r.addEventListener("input",()=>{d.setAttribute("fill",r.value),S()}),u.addEventListener("input",()=>{m.setAttribute("fill",u.value),S()}),A.addEventListener("click",()=>{r.value="#6c31e3",u.value="#262626",d.setAttribute("fill",r.value),m.setAttribute("fill",u.value),s.selectedIndex=0,S()}),s.addEventListener("change",()=>{let e=s.options[s.selectedIndex],n=e.getAttribute("data-arrow"),t=e.getAttribute("data-background");r.value=n,u.value=t,d.setAttribute("fill",n),m.setAttribute("fill",t),S()}),b.addEventListener("click",()=>{let e=R(),n=R();r.value=e,u.value=n,d.setAttribute("fill",e),m.setAttribute("fill",n),S()}),b.addEventListener("click",()=>{let e=w(0,360),n=w(0,75),t=w(10,65),a=w(0,360),i=w(0,65),f=w(0,95),l=U(e,n,t),o=U(a,i,f);r.value=l,u.value=o,d.setAttribute("fill",l),m.setAttribute("fill",o),S()}),fish("#save-button-png").addEventListener("click",()=>{let e=G(h.naturalWidth);I(e.replace("image/png","image/octet-stream"),"obsidian-icon.png")}),fish("#save-button-svg").addEventListener("click",()=>{I(h.src,"obsidian-icon.svg")}),fish("#save-button-ico").addEventListener("click",()=>{I(O(),"obsidian-icon.ico")}),fish("#save-button-icns").addEventListener("click",()=>{I(K(),"obsidian-icon.icns")});function R(){let e="0123456789ABCDEF",n="#";for(let t=0;t<6;t++)n+=e[Math.floor(Math.random()*16)];return n}function U(e,n,t){let a=V(e,n,t),i=B(a.r),f=B(a.g),l=B(a.b);return`#${i}${f}${l}`}function V(e,n,t){e/=360,n/=100,t/=100;let a,i,f;if(n===0)a=i=f=t;else{let l=(c,p,y)=>(y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?c+(p-c)*6*y:y<.5?p:y<.6666666666666666?c+(p-c)*(.6666666666666666-y)*6:c),o=t<.5?t*(1+n):t+n-t*n,g=2*t-o;a=Math.round(l(g,o,e+1/3)*255),i=Math.round(l(g,o,e)*255),f=Math.round(l(g,o,e-1/3)*255)}return{r:a,g:i,b:f}}function B(e){let n=e.toString(16);return n.length===1?`0${n}`:n}function w(e,n){let t=n-e+1,a=Math.floor(Math.random()*t);return e+a}function J(e){let n=window.atob(e),t=n.length,a=new Uint8Array(t);for(let i=0;i<t;i++)a[i]=n.charCodeAt(i);return a.buffer}function x(e){let n=e.length,t=0,a=0,i=[];for(;a<n;){let l=e[a],o=1;for(;a+o<n&&o<130&&e[a+o]===l;)++o;if(o>=3){for(;t<a;){let c=Math.min(a-t,128),p=c-1;i.push(p),i.push(...Array.from(e.slice(t,t+c))),t+=c}let g=o+125;i.push(g),i.push(l),a+=o,t=a}else a+=o}for(;t<a;){let l=Math.min(a-t,128),o=l-1;i.push(o),i.push(...Array.from(e.slice(t,t+l))),t+=l}let f=new Uint8Array(i.length);return f.set(i),f}});})();
