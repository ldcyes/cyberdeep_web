(()=>{var I=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var w=(e,t,a)=>new Promise((n,o)=>{var u=c=>{try{d(a.next(c))}catch(h){o(h)}},r=c=>{try{d(a.throw(c))}catch(h){o(h)}},d=c=>c.done?n(c.value):Promise.resolve(c.value).then(u,r);d((a=a.apply(e,t)).next())}),T=function(e,t){this[0]=e,this[1]=t},G=(e,t,a)=>{var n=(r,d,c,h)=>{try{var M=a[r](d),C=(d=M.value)instanceof T,l=M.done;Promise.resolve(C?d[0]:d).then(s=>C?n(r==="return"?r:"next",d[1]?{done:s.done,value:s.value}:s,c,h):c({value:s,done:l})).catch(s=>n("throw",s,c,h))}catch(s){h(s)}},o=r=>u[r]=d=>new Promise((c,h)=>n(r,d,c,h)),u={};return a=a.apply(e,t),u[I("asyncIterator")]=()=>u,o("next"),o("throw"),o("return"),u};var B=(e,t,a)=>(t=e[I("asyncIterator")])?t.call(e):(e=e[I("iterator")](),t={},a=(n,o)=>(o=e[n])&&(t[n]=u=>new Promise((r,d,c)=>(u=o.call(e,u),c=u.done,Promise.resolve(u.value).then(h=>r({value:h,done:c}),d)))),a("next"),a("return"),t);var F="https://raw.githubusercontent.com/";function P(e,t,a){return F+e+"/"+(a||"HEAD")+"/"+t}function U(){return w(this,null,function*(){let e=yield ajaxPromise({url:P("obsidianmd/obsidian-releases","community-plugins.json")}),t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Failed to parse community plugins.");return t})}function H(){return w(this,null,function*(){let e=yield ajaxPromise({url:P("obsidianmd/obsidian-releases","community-plugin-stats.json")});try{return JSON.parse(e)}catch(t){throw t}})}function K(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function x(e,t,a){return a||(a=t+"s"),e===1?e+" "+t:K(e)+" "+a}var S="";try{let e=new URLSearchParams(location.search);S=e.get("id"),S?setTimeout(()=>{location.href="obsidian://show-plugin?id="+encodeURIComponent(S)},0):S=e.get("search")}catch(e){console.error(e)}S=S||"";w(void 0,null,function*(){let e=l=>{let s=l.length,p;for(;s!==0;)p=Math.floor(Math.random()*s),s--,[l[s],l[p]]=[l[p],l[s]];return l},t=fish(".plugins-container"),a=fish(".plugin-count"),n=fish(".plugin-search"),o=yield U(),u=yield H(),r=new WeakMap,d=l=>{let s=r.get(l);s&&s.hidden&&(s.hidden=!1,l.append(...s.children),l.setCssStyles({height:"",contain:""}))},c=()=>{let l=Array.from(t.children).filter(m=>m instanceof HTMLElement),s=t.getBoundingClientRect();for(let m of l){let i=r.get(m);i||(i={hidden:!1,children:null,height:0,top:0},r.set(m,i));let g=m.getBoundingClientRect();i.hidden||(i.height=g.height),i.top=g.top-s.top}let p=window.innerHeight;for(let m of l){let i=r.get(m);if(i.height===0)continue;let g=s.top+i.top;g+i.height>-100&&g<p+100?i.hidden&&(i.hidden=!1,m.append(...i.children),m.setCssStyles({height:"",contain:""})):!i.hidden&&m.firstChild&&(i.hidden=!0,i.children=Array.from(m.childNodes),m.empty(),m.setCssStyles({height:i.height+"px",contain:"strict"}))}};window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",c,{passive:!0}),a.setText(x(o.length,"plugin")),e(o);function h(l){l=(l||"").trim();let s=l.toLowerCase().split(" ");t.empty();let p=[];for(let i of o){let g=-1/0,b,y,f;if(l){if(b=L(s,l,i.name),y=L(s,l,i.description),f=L(s,l,i.author),!b&&!y&&!f&&l!==i.id.toLowerCase())continue;b&&(g=Math.max(b.score,g)),y&&(g=Math.max(y.score,g)),f&&(g=Math.max(f.score,g))}let A=jsx("div",{class:"p-5 flex flex-col rounded-lg bg-secondary transition-all hover:shadow-2xl hover:bg-gray-800"}),N=u.hasOwnProperty(i.id)?u[i.id].downloads:0,D=()=>{A.appendChild(jsx(jsxFragment,null,jsx("div",{class:"text-lg mb-1 font-semibold leading-tight"},R(i.name,b?b.matches:null)),jsx("p",{class:"text-muted text-sm"},"By\xA0",R(i.author,f?f.matches:null)),N?jsx("p",{class:"text-muted text-sm"}," ",x(N,"download")):"",jsx("div",{class:"py-3 leading-tight"},R(i.description,y?y.matches:null)),jsx("div",{class:"text-center mt-auto"},jsx("div",{class:"flex-1 flex gap-4 mt-3"},jsx("a",{class:"block button py-1.5 text-sm shadow",href:"#",onclick:()=>location.href="obsidian://show-plugin?id="+encodeURIComponent(i.id)},"Install"),jsx("a",{class:"ml-auto block text-muted font-medium py-1.5 text-sm",href:`https://github.com/${i.repo}`,target:"_blank"},"Learn\xA0more"),jsx("a",{class:"flex text-muted font-medium py-1.5 text-sm transition-all duration-300",href:"#",onclick:E=>{navigator.clipboard.writeText("https://obsidian.md/plugins?id="+encodeURIComponent(i.id)),E.preventDefault();let v=E.currentTarget;v.addClass("copied"),setTimeout(()=>v.removeClass("copied"),2e3)}},"Copy\xA0link"))))),d(A)};p.push({score:g,el:A,render:D})}p.sort((i,g)=>g.score-i.score);for(let i of p)t.appendChild(i.el);let m=W(z(p),c);w(this,null,function*(){try{for(var i=B(m),g,b,y;g=!(b=yield i.next()).done;g=!1){let f=b.value;f.render()}}catch(b){y=[b]}finally{try{g&&(b=i.return)&&(yield b.call(i))}finally{if(y)throw y[0]}}})}n.value=S,h(S);let M=()=>{let l=n.value;h(l),l!==""?window.history.replaceState(null,null,`?search=${l}`):window.history.replaceState(null,null,window.location.pathname)},C=0;n.addEventListener("input",()=>{window.clearTimeout(C),C=window.setTimeout(M,100)})});function L(e,t,a){let n=k(e,a);return n?{score:O(n,t.length,a.length,0),matches:n}:null}function O(e,t,a,n){if(e.length===0)return 0;let o=0;o-=Math.max(0,e.length-1),o-=n/10;let u=e[0][0],r=e[e.length-1][1];return o-=(r-u+1-t)/100,o-=u/1e3,o-=a/1e4,o}function k(e,t){let a=t.toLowerCase(),n=[];for(let o of e){if(!o)continue;let u=!1,r=-1,d=o.length;for(;(r=a.indexOf(o,r))!==-1;)u=!0,n.push([r,r+d]),r+=d+1;if(!u)return null}return J(n)}var V=(e,t)=>e[0]-t[0];function J(e){if(e.length===0)return e;e.sort(V);let t=[e[0]];for(let a=1;a<e.length;a++){let n=t.last();n[1]<e[a][0]?t.push(e[a]):n[1]<e[a][1]&&(n[1]=e[a][1])}return t}function R(e,t){if(!t||t.length===0)return document.createTextNode(e);let a=document.createDocumentFragment(),n=0;for(let o=0;n<e.length&&o<t.length;o++){let u=t[o],r=u[0],d=u[1];if(!(d<=0)){if(r>=e.length)break;r<0&&(r=0),r!==n&&a.appendText(e.substring(n,r)),a.createSpan({cls:"suggestion-highlight",text:e.substring(r,d)}),n=d}}return n<e.length&&a.appendText(e.substring(n)),a}function z(e){return G(this,null,function*(){for(let t of e)yield t})}function W(e,t){return G(this,null,function*(){let a=0,n=performance.now();try{for(var o=B(e),u,r,d;u=!(r=yield new T(o.next())).done;u=!1){let c=r.value;yield c,a++,a%10===0&&performance.now()-n>5&&(t(),yield new T(new Promise(M=>{window.requestIdleCallback?window.requestIdleCallback(()=>M(),{timeout:100}):window.requestAnimationFrame(()=>M())})),n=performance.now())}}catch(r){d=[r]}finally{try{u&&(r=o.return)&&(yield new T(r.call(o)))}finally{if(d)throw d[0]}}})}})();
