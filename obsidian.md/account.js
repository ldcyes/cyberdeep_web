(()=>{var Ga=Object.getPrototypeOf;var za=Reflect.get;var x=(r,e)=>()=>(r&&(e=r(r=0)),e);var Va=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var ge=(r,e,t)=>za(Ga(r),t,e);var d=(r,e,t)=>new Promise((a,o)=>{var s=u=>{try{n(t.next(u))}catch(l){o(l)}},i=u=>{try{n(t.throw(u))}catch(l){o(l)}},n=u=>u.done?a(u.value):Promise.resolve(u.value).then(s,i);n((t=t.apply(r,e)).next())});var Gt=x(()=>{});function zt(r){let e=[],t=r.byteLength;for(let a=0;a<t;a++)e.push(String.fromCharCode(r[a]));return window.btoa(e.join(""))}function Vt(r,e){return d(this,null,function*(){let t;try{t=yield ajaxPromise({method:"POST",url:r,data:e})}catch(a){throw a.error?a.error:a}if(t=JSON.parse(t),t.code)throw t.code;if(t.error)throw t.error;return t})}function ne(r){let e,t=!1;return()=>(t||(e=r(),t=!0),e)}function be(r){return new Promise((e,t)=>{let a=document.createElement("script");a.type="text/javascript",a.src=r,a.addEventListener("load",()=>e(a)),a.addEventListener("error",o=>t(o)),document.body.appendChild(a)})}function Yt(){return location.pathname+location.search+location.hash}function S(r,e){let t=(r/100).toFixed(2).toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e&&t[1]==="00"?t[0]:t.join(".")}function B(r){return new Date(r).toISOString().split("T")[0]}var Ke,H=x(()=>{Gt();Ke={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}});function b(r,e){return Vt(ye+r,e||{})}function ve(){return b("/user/signout")}function Xe(r){return b("/user/mfa/enable",r)}function _t(r){return b("/user/mfa/disable",r)}function Wt(r){return b("/user/mfa/recoverycodes/regenerate",r)}function $t(){return b("/user/info")}function jt(r){return b("/user/signout-everywhere",r)}function Kt(r){return b("/user/changename",r)}function Zt(r){return b("/user/changeemail",r)}function Xt(r){return b("/user/changepass",r)}function Jt(r){return b("/user/deleteaccount",r)}function Qt(){return b("/subscription/list")}function U(r){return b("/subscription/renew",r)}function ea(){return b("/subscription/stripe/setup")}function ta(){return b("/subscription/taxexemption/status")}function aa(r){return b("/subscription/taxexemption/delete",r)}function oa(r){return b("/subscription/taxexemption/upload",r)}function ra(r){return b("/subscription/taxexemption/vat",r)}function sa(r){return b("/subscription/role/discord",r)}function na(){return b("/subscription/role/forum")}function ia(){return b("/subscription/invoice/list")}function la(r){return b("/subscription/invoice/refund",r)}function da(){return b("/subscription/paypal/clientid")}function ua(r){return b("/user/discount/apply",r)}function fa(r){return b("/user/gift/create",r)}function pa(){return b("/user/gift/list")}function ca(r){return b("/user/gift/info",r)}function ie(r){return b("/user/gift/redeem",r)}function ma(r){return b("/publish/share/info",r)}function ha(r){return b("/publish/share/accept",r)}function xa(r){return b("/vault/share/info",r)}function ga(r){return b("/vault/share/accept",r)}var Ze,ye,ao,qt,D=x(()=>{H();Ze=location.host.startsWith("127.0.0.1")||location.host.startsWith("localhost"),ye="https://api.obsidian.md";Ze&&(ye="http://127.0.0.1:3000");ao=ye+"/subscription/stripe/finish",qt=ye+"/subscription/stripe/setup/finish"});var ba,Je,ya=x(()=>{ba=(r,e,t=[])=>{let a=document.createElementNS("http://www.w3.org/2000/svg",r);return Object.keys(e).forEach(o=>{a.setAttribute(o,String(e[o]))}),t.length&&t.forEach(o=>{let s=ba(...o);a.appendChild(s)}),a},Je=([r,e,t])=>ba(r,e,t)});var E,G=x(()=>{E={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}});var le,va=x(()=>{G();le=["svg",E,[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]]]});var Qe,wa=x(()=>{G();Qe=["svg",E,[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}]]]});var et,Ea=x(()=>{G();et=["svg",E,[["path",{d:"m9 18 6-6-6-6"}]]]});var tt,Ca=x(()=>{G();tt=["svg",E,[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]]]});var at,Sa=x(()=>{G();at=["svg",E,[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"}]]]});var de,Pa=x(()=>{G();de=["svg",E,[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]]]});var ot,Ta=x(()=>{G();ot=["svg",E,[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]]]});var rt,Ma=x(()=>{G();rt=["svg",E,[["path",{d:"m22 2-7 20-4-9-9-4Z"}],["path",{d:"M22 2 11 13"}]]]});var st,La=x(()=>{G();st=["svg",E,[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]]]});var nt,Aa=x(()=>{G();nt=["svg",E,[["circle",{cx:"12",cy:"8",r:"5"}],["path",{d:"M20 21a8 8 0 0 0-16 0"}]]]});var q=x(()=>{ya();va();wa();Ea();Ca();Sa();Pa();Ta();Ma();La();Aa();});var N,P,h,L,ae,z=x(()=>{N=class{constructor(){this.containerEl=createDiv("modal-container");let e=this.bgEl=this.containerEl.createDiv("modal-bg"),t=this.modalEl=this.containerEl.createDiv("modal"),a=t.createDiv("modal-close-button");this.titleEl=t.createDiv("modal-title"),this.contentEl=t.createDiv("modal-content"),this.buttonContainerEl=t.createDiv("modal-button-container"),a.addEventListener("click",this.close.bind(this)),e.addEventListener("click",this.close.bind(this))}setTitle(e){return this.titleEl.setText(e),this}addCloseButton(){this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Close"}).addEventListener("click",this.close.bind(this))}open(){document.body.appendChild(this.containerEl),document.body.addClass("modal-open"),this.onOpen()}close(){this.onClose(),document.body.removeClass("modal-open"),this.containerEl.detach()}onOpen(){}onClose(){}},P=class extends N{constructor(){super(),this.addCloseButton()}},h=class extends N{constructor(){super();let e=this.contentEl.createDiv("message-container");this.errorEl=e.createDiv("pb-4 payment-error message mod-error text-red-400"),this.hideError()}showError(e){let{errorEl:t}=this;e instanceof XMLHttpRequest&&(e=e.statusText),t.setText(e.toString()),t.show()}hideError(){let{errorEl:e}=this;e.hide(),e.empty(),e.setText("")}},L=class extends N{constructor(e,t){super(),this.setTitle(e),this.messageContainerEl=this.contentEl.createDiv("message-container"),this.messageContainerEl.createDiv({cls:"message mod-success",text:t}),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Got it"}).addEventListener("click",()=>{this.close(),window.location.reload()})}},ae=class extends N{constructor(e,t,a,o){super(),this.setTitle(e),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:t}),this.buttonContainerEl.createEl("button",{cls:"button button-danger",text:a}).addEventListener("click",()=>{this.close(),o()}),this.buttonContainerEl.createEl("button",{cls:"button",text:"Go back"}).addEventListener("click",()=>{this.close()})}}});function V(r){let e=Je(r);return e.addClass("inline","icon"),e}var ue=x(()=>{q()});function we(r){return jsx("a",{href:r.href,class:"nav-item font-medium flex items-center gap-2 relative py-3 md:p-0"},V(r.icon)," ",r.display)}var A,k,F,y,W=x(()=>{ue();A=class{constructor(){this.containerEl=jsx("div",{class:"flex gap-6 md:gap-4 flex-col md:flex-row justify-between ring-2 ring-green-400 md:bg-green-950 -mx-2 md:-mx-4 lg:-mx-6 mt-4 mb-4 p-4 lg:p-6 rounded-lg leading-tight lg:text-lg lg:leading-tight md:mt-0"},this.contentEl=jsx("div",{class:"space-y-2"}),this.buttonsEl=jsx("div",{class:"flex flex-col space-y-2 empty:hidden"}))}addButton(e,t){let a=jsx("button",{class:"button text-base md:text-sm button-md button-primary"},e);a.addEventListener("click",o=>{t(o,a)}),this.buttonsEl.append(a)}addContentMessage(e){this.contentEl.append(jsx("p",null,e))}addContent(...e){this.contentEl.append(...e)}};k=class{constructor(e,t){this.sectionEl=jsx("section",{id:e},jsx("div",{class:"pb-24 md:pt-12 md:pl-10 lg:pr-8 lg:pl-16"},this.headerEl=jsx("div",{class:"flex gap-2 items-center mt-4 md:mt-0 md:mb-6"},this.titleEl=jsx("h2",{class:"text-2xl md:text-3xl font-semibold"},t)),this.contentEl=jsx("div",null)))}update(){}hideBanner(){this.banner&&this.banner.containerEl.hide()}},F=class{constructor(e){let t=this.containerEl=jsx("div",{class:"space-y-4 divide-y divide-gray-700"});e.appendChild(t)}addSetting(e){return this.containerEl.appendChild(e.containerEl),e}},y=class{constructor(){this.containerEl=jsx("div",{class:"setting pt-4 flex gap-6 items-center"},jsx("div",null,this.nameEl=jsx("div",{class:"block font-medium text-base md:text-lg"}),this.descEl=jsx("div",{class:"text-muted leading-4 mt-1 text-xs sm:text-sm md:text-base"})),this.controlsEl=jsx("div",{class:"ml-auto flex flex-col lg:flex-row gap-2"}))}setName(e){return this.nameEl.setText(e),this}setDesc(e){return this.descEl.setText(e),this}addButton(e,t,a){let o=jsx("a",{class:"button min-w-[5rem] button-sm sm:button-md"},e);return o.addEventListener("click",s=>{s.preventDefault(),t(s)}),a&&a(o),this.controlsEl.appendChild(o),this}addDangerButton(e,t){return this.addButton(e,t,a=>a.addClass("button-danger"))}addPrimaryButton(e,t){return this.addButton(e,t,a=>a.addClass("button-primary"))}addLink(e,t){let a=jsx("a",{class:"button min-w-[5rem] button-sm sm:button-md",href:t,target:"_blank"},e);return this.controlsEl.appendChild(a),this}}});function K(){location.search&&history.replaceState(null,null,location.pathname)}function Z(r,e){r.addEventListener("keydown",t=>{t.isComposing||t.key==="Enter"&&e()})}function it(r){return jsx("div",{className:"toggler w-48 mt-4 rounded-lg border border-gray-700 p-0.5",onclick:r},jsx("div",{className:"flex flex-col h-7 yearly-toggle-on relative"},jsx("button",{className:"h-7 flex items-center justify-center absolute left-0 z-10 w-1/2 rounded-md py-1 px-2 text-sm font-semibold text-muted"},"Yearly"),jsx("button",{className:"h-7 flex items-center justify-center absolute right-0 z-10 w-1/2 rounded-md py-1 px-2 text-sm font-semibold text-muted"},"Monthly"),jsx("div",{className:"absolute glider rounded-md w-1/2 h-7 bg-gray-700 transition-all"})))}function Ba(r){let e=jsx("div",null,jsx("p",{className:"flex items-baseline gap-x-1"},jsx("span",{className:"text-2xl font-semibold"},"$",S(r.yearly,!0)),jsx("span",{className:"text-sm text-muted"},"USD")),jsx("div",{className:"text-muted text-xs sm:text-sm"},r.yearlyDesc)),t=jsx("div",{style:"display:none;"},jsx("p",{className:"flex items-baseline gap-x-1"},jsx("span",{className:"text-2xl font-semibold"},"$",S(r.monthly,!0)),jsx("span",{className:"text-sm text-muted"},"USD")),jsx("div",{className:"text-muted text-xs sm:text-sm"},r.monthlyDesc)),a=it(o);function o(){let n=!s();a.toggleClass("toggler-on",n),e.toggle(!n),t.toggle(n)}function s(){return a.hasClass("toggler-on")}function i(){return this.getStatus()?"monthly":"yearly"}return{el:jsx(jsxFragment,null,e,t,a),toggle:o,getStatus:s,getRenew:i}}var g,Y=x(()=>{H();g=new URLSearchParams(location.search.substring(1))});function qa(r){return d(this,null,function*(){let e="823279137640415263",t=location.protocol+"//"+location.host+location.pathname;r.addClass("mod-disabled"),location.href=`https://discord.com/api/oauth2/authorize?client_id=${e}&redirect_uri=${encodeURIComponent(t)}&response_type=code&scope=identify`})}function _a(r){return d(this,null,function*(){r.addClass("mod-disabled");try{yield na(),new lt().open()}catch(e){new dt(e).open()}r.removeClass("mod-disabled")})}var ut,Ee,Ce,lt,dt,Se,Pe=x(()=>{q();D();z();W();Y();ut={href:"/account/catalyst",display:"Catalyst",icon:at};Ee=class extends N{constructor(){super(),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:"Successfully added badge for you!"}),this.setTitle("Added Discord badge"),this.contentEl.append(jsx("p",null,"Thanks for supporting Obsidian! Your support helps us stay independent so we can pursue our vision."))}},Ce=class extends h{constructor(e){super(),this.setTitle("Couldn't add Discord badge"),this.contentEl.append(jsx("p",null,"Please contact us for support or try again later. We're really sorry for the inconvenience!")),this.showError(e)}},lt=class extends N{constructor(){super(),this.contentEl.createDiv("message-container").createDiv({cls:"message mod-success",text:"Successfully added badge for you!"}),this.setTitle("Added forum badge"),this.contentEl.append(jsx("p",null,"Thanks for supporting Obsidian! Your support helps us stay independent so we can pursue our vision."),jsx("p",null,'P.S. Your forum badge is not a "badge" in the forum system, but a shiny gold tag right next to your name in all of your posts. Hope that helps!'))}},dt=class extends h{constructor(e){super(),this.setTitle("Couldn't add forum badge"),this.contentEl.append(jsx("p",null,"Please contact us for support or try again later. We're really sorry for the inconvenience!")),this.showError(e)}},Se=class extends k{constructor(e){super("catalyst","Catalyst"),this.page=e}getNavInfo(){return ut}update(){let{data:e}=this.page,t=e.license,{headerEl:a,titleEl:o,contentEl:s}=this;if(s.empty(),t){let i={insider:"Insider",supporter:"Supporter",vip:"VIP"};if(a.setChildrenInPlace([o,jsx("span",{class:"flair"},i[t]||t)]),g.get("order_success")==="catalyst"){let n=this.banner=new A;n.addContentMessage("Your Catalyst purchase was successful. Thank you so much for your support!"),this.contentEl.append(n.containerEl)}s.append(jsx("div",{class:"flex gap-6 flex-col sm:flex-row sm:items-center"},jsx("div",null,jsx("p",{class:"md:text-lg mt-2 max-w-lg leading-tight"},"Thank you for being a Catalyst member. Your support helps us remain 100% independent and build Obsidian without compromising ",jsx("a",{href:"/about",target:"_blank",class:"text-accent font-medium"},"our\xA0values"),"."),jsx("p",{class:"md:text-lg mt-2 max-w-lg leading-tight"},"To get early access to new versions of Obsidian, ",jsx("a",{href:"https://help.obsidian.md/Obsidian/Early+access+versions",target:"_blank",class:"text-accent font-medium"},"see\xA0this\xA0guide"),".")),jsx("div",{class:"setting-item-control sm:ml-auto flex flex-col gap-2"},t==="vip"?jsx(jsxFragment,null):jsx("div",{class:"w-full sm:ml-auto"},jsx("button",{class:"button button-md button-primary w-full",onclick:()=>window.location.assign("/buy/catalyst")},"Upgrade to a higher tier")),jsx("button",{class:"button button-md claim-discord-badge-button",onclick:this.getDiscordBadge.bind(this)},"Get Discord badge"),jsx("button",{class:"button button-md claim-forum-badge-button",onclick:this.getForumBadge.bind(this)},"Get forum badge"))))}else a.setChildrenInPlace([o]),s.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{class:"mt-4 leading-tight max-w-xl md:text-lg md:mt-0"},"Support development with a one-time donation that gives you early access to beta versions of Obsidian and special badges in the\xA0community. ",jsx("a",{href:"https://help.obsidian.md/Licenses+and+payment/Catalyst+license",class:"text-accent font-medium",target:"_blank"},"Learn more.")),jsx("div",{class:"mt-6"},jsx("span",{class:"text-2xl font-semibold"},"$25+")," ",jsx("span",{class:"text-sm text-muted"},"USD"),jsx("div",{class:"text-muted text-xs sm:text-sm"},"one-time donation"))),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button text-base md:text-sm button-md button-primary w-full",onclick:()=>window.location.assign("/buy/catalyst")},"Join Catalyst"))))}getDiscordBadge(e){qa(e.targetNode)}getForumBadge(e){_a(e.targetNode)}}});var Te,ft,Me,Le,pt=x(()=>{D();z();Te=class extends h{constructor(){super(),this.setTitle("Apply for a discount"),this.contentEl.append(jsx("p",{class:"max-w-lg my-2 leading-tight"},"Choose the discount type you're applying for and enter your school or organization email. We will send an email to this email address to verify\xA0it."),jsx("p",{class:"max-w-lg text-muted my-2 leading-tight"},"Note that if you have an early bird discount, discounts will not\xA0stack."),jsx("p",{class:"max-w-lg text-muted my-2 leading-tight"},"If you do not have an organization email, please contact us at ",jsx("a",{href:"mailto:support@obsidian.md",class:"underline"},"support@obsidian.md")," to provide other forms of verification, such as a student ID card, transcript, or employee ID\xA0card."),jsx("p",{class:"my-2"},jsx("label",null,jsx("span",{class:"input-label"},"Discount type"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},jsx("input",{type:"radio",name:"apply-discount-type",value:"1",checked:!0})," Education (student or faculty)"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},jsx("input",{type:"radio",name:"apply-discount-type",value:"2"})," Non-profit organization"))),jsx("p",{class:"my-2"},jsx("label",null,jsx("span",{class:"input-label"},"School or organization email"),this.emailEl=jsx("input",{type:"email",class:"input w-full max-w-sm",placeholder:"Enter your email..."})))),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Send application"}).addEventListener("click",()=>d(this,null,function*(){this.hideError();let e=this.contentEl.find('input[name="apply-discount-type"]:checked').value,t=this.emailEl.value;if(!e){this.showError("Please select a discount type.");return}if(t===""||!t.contains("@")){this.showError("Please enter a valid organization email address.");return}try{yield ua({type:e,email:t}),this.close(),new ft().open()}catch(a){this.showError(a)}})),this.buttonContainerEl.createEl("button",{cls:"button ml-2",text:"Cancel"}).addEventListener("click",this.close.bind(this))}},ft=class extends P{constructor(){super(),this.setTitle("Verify your email"),this.contentEl.append(jsx("p",null,"Thanks for applying for Obsidian discount!"),jsx("p",null,"We've sent an email to your organization email address to verify your email. Once you click on the link, the application will be submitted for review."),jsx("p",null,"If you don't see the email in a few minutes, please try checking your spam folder. You can try applying for a discount again."))}},Me=class extends P{constructor(){super(),this.setTitle("Organization email verified"),this.contentEl.append(jsx("p",null,"Thanks for verifying your organization email! We'll take a look at your application as soon as we can."),jsx("p",null,"You'll get an email update when your discount application is approved. Have a nice day!"))}},Le=class extends P{constructor(e){super(),this.setTitle("Your discount is active"),this.contentEl.append(jsx("p",null,"Your ",jsx("span",{class:"approved-discount-type"},e)," discount is approved!"),jsx("p",null,"You'll see the discount applied when you try to buy Obsidian Sync or Obsidian Publish. It's not applicable to Catalyst or commercial licenses."))}}});var Wa,$a,ka,pr,cr,Da,Q,Ae,ct=x(()=>{D();z();H();Wa=/^(.+)\((.+)\)$/,$a=Ze?"pk_test_y7CBP7qLG6kSU9sdcHV5S2db0052OC4wR8":"pk_live_vqeOYADfYPpqKDT5FtAqCNBP00a9WEhYa6",ka=ne(()=>d(void 0,null,function*(){yield Promise.all([be("https://js.braintreegateway.com/web/3.85.2/js/client.min.js"),be("https://js.braintreegateway.com/web/3.85.2/js/data-collector.min.js"),be("https://js.braintreegateway.com/web/3.85.2/js/paypal-checkout.min.js")]);let r=yield da(),e=window.braintree,t=yield e.client.create({authorization:r.clientid});return{braintree:e,braintreeClient:t}})),pr=ne(()=>d(void 0,null,function*(){let{braintree:r,braintreeClient:e}=yield ka(),t=yield r.paypalCheckout.create({client:e});yield t.loadPayPalSDK({vault:!0,currency:"CAD",intent:"capture"});let a=window.paypal;return{paypalCheckout:t,paypal:a}})),cr=ne(()=>d(void 0,null,function*(){let{braintree:r,braintreeClient:e}=yield ka();return yield r.dataCollector.create({client:e})})),Da=ne(()=>window.Stripe($a)),Q=class{constructor(e,t){let a=this.containerEl=e.createDiv("payment-line gap-2 flex items-center w-full py-2 border-t border-gray-700"),o=a.createDiv("payment-desc grow flex flex-col");this.descEl=o.createSpan("font-medium"),this.subDescEl=o.createSpan("text-muted text-sm"),this.amountEl=a.createSpan("payment-amount justify-right"),this.splitDesc(t),this.containerEl.hide()}setValues(e,t,a){let{containerEl:o,amountEl:s}=this;o.toggle(e),s.setText(t>=0?"$"+S(t):"-$"+S(-t)+" USD"),this.splitDesc(a)}splitDesc(e){if(!String.isString(e))return;let{descEl:t,subDescEl:a}=this,o=e,s="",i=Wa.exec(e);if(i){o=i[1].trimEnd();let n=i[2];s=n[0].toUpperCase()+n.slice(1)}t.setText(o),a.setText(s)}},Ae=class r extends h{constructor(){super(),this.setTitle("Change card"),this.contentEl.append(jsx(jsxFragment,null,this.currentCardMessage=jsx("p",{class:"mb-2"}),jsx("p",{class:"mb-4"},"Enter the details of your new card below. Your card will not be charged until the next renewal date."),jsx("div",{id:"stripe-payment-element",class:"w-full",style:"background:unset;"}),this.updateButton=jsx("button",{onclick:this.pay.bind(this),class:"mt-8 button text-base button-primary w-full"},"Update")))}onOpen(){return d(this,null,function*(){ge(r.prototype,this,"onOpen").call(this);let e={theme:"stripe",variables:{colorPrimary:"#fff",colorBackground:"#222222",colorText:"#eeeeee",colorDanger:"#FB464C",colorSuccess:"#44CF6E",spacingUnit:"0.25rem",fontSmooth:"never",fontSizeBase:"16px",fontSizeSm:"0.875rem",fontLineHeight:"1.4",fontFamily:'ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter","Microsoft YaHei Light", sans-serif'},rules:{".Label":{fontWeight:"500",marginBottom:"8px",marginTop:"4px"},".Input":{boxShadow:"0 0 0 1px rgba(64,64,64,1)",borderWidth:"0"},".Input:focus":{boxShadow:"0 0 0 3px rgba(82,82,82,1)",borderWidth:"0"},".Input:hover:focus":{boxShadow:"0 0 0 3px rgba(82,82,82,1)",borderWidth:"0"}}};try{let t=yield ea();this.currentCardMessage.setText(t.method_info?`You're currently using a ${t.method_info}.`:"You currently do not have any payment methods on file."),this.elements=Da().elements({appearance:e,clientSecret:t.client_secret}),this.paymentElement=this.elements.create("payment",{defaultValues:{billingDetails:{address:{country:t.country,postal_code:t.postal_code}}}}),this.paymentElement.mount("#stripe-payment-element")}catch(t){this.showError("Unable to load payment information. Please try again."),console.error(t);return}this.setLoading(!1)})}onClose(){super.onClose(),this.paymentElement.destroy()}pay(e){return d(this,null,function*(){e.preventDefault(),this.setLoading(!0);try{let{error:t}=yield Da().confirmSetup({elements:this.elements,confirmParams:{return_url:qt}});t&&this.showError(t.message)}catch(t){this.showError(t)}finally{this.setLoading(!1)}})}setLoading(e){this.updateButton.toggleClass("mod-disabled",e),this.updateButton.disabled=e}}});var mt,Be,fe,De,pe,ke,Ie,oe,ht=x(()=>{D();z();ct();Y();H();mt=class{constructor(e){this.total=new Q(e,"Current balance"),this.giftEligible=new Q(e,"Credit eligible to gift"),this.gift=new Q(e,"Credit to send"),this.remaining=new Q(e,"Remaining balance")}setValues(e){let{total:t,eligible:a,gift:o,remaining:s}=e;this.total.setValues(!0,t,"Current balance"),this.giftEligible.setValues(a!==t,a,"Credit eligible to gift"),this.gift.setValues(!0,o,"Credit to send"),this.remaining.setValues(!0,s,"Remaining balance")}},Be=class extends h{constructor(e,t){super(),this.userCredit=e,this.userCreditReceived=t,this.setTitle("Send credit"),this.contentEl.appendChild(jsx("p",{class:"mb-4"},"You can send Obsidian Credit to anyone, such as friends, family, and coworkers. Credit can be used to pay for any Obsidian license or service. The minimum you can send is $5\xA0USD.")),this.userCreditReceived>0&&this.contentEl.appendChild(jsx("p",{class:"mb-4 text-muted text-sm"},"You may only send credit which you purchased. Credit received from another account may not be sent.")),this.contentEl.createEl("p",{},o=>{let s=Math.min(Math.floor(e/100),Math.floor((e-t)/100));o.createEl("label",{cls:"input-label",text:"Amount to send (USD)"}),this.giftAmountEl=o.createEl("input",{type:"number",cls:"min-w-[100px]",attr:{min:1,max:s,value:5,step:1}})}),this.giftOptionsEl=this.contentEl.createDiv(),this.updateGiftOptions(!0),this.giftAmountEl.addEventListener("change",this.updateSummary.bind(this));let a=this.summaryEl=this.contentEl.createDiv("payment-summary");this.contentEl.createDiv("flex pt-6 gap-2 justify-end",o=>{o.createEl("button",{cls:"button button-primary",text:"Send credit"},s=>{s.onClickEvent(()=>d(this,null,function*(){this.hideError();let i=this.recipientEl.value,n=this.getGiftAmount(),u=this.emailOptionEl.checked;if(u){if(!i){this.showError("Please enter email of the recipient so we can send the gift for you!");return}if(!i.contains("@")){this.showError("Please enter valid recipient email.");return}}if(isNaN(n)){this.showError("Please enter a valid gift amount.");return}if(n<500){this.showError("You need to gift at least $5.");return}if(n>e){this.showError("You cannot gift more credit than you currently have.");return}if(n>e-t){this.showError("You cannot gift credit whicch was received from another account.");return}try{let l=yield fa({recipient:i,amount:n,should_email:this.emailOptionEl.checked});u?window.location.reload():(this.close(),new pe(l.redeem_code,n,i).open())}catch(l){this.showError(l)}}))}),o.createEl("button",{cls:"button",text:"Cancel"}).addEventListener("click",this.close.bind(this))}),this.summary=new mt(a)}getGiftAmount(){return parseInt(this.giftAmountEl.value)*100}updateGiftOptions(e){this.giftOptionsEl.empty(),this.giftOptionsEl.append(jsx(jsxFragment,null,jsx("p",{class:"my-2"},jsx("span",{class:"input-label"},"Method"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},this.codeOptionEl=jsx("input",{type:"radio",name:"gift-method",value:"code",checked:e})," Get redeem link"),jsx("label",{class:"flex items-center gap-1 cursor-pointer"},this.emailOptionEl=jsx("input",{type:"radio",name:"gift-method",value:"email",checked:!e})," Send anonymously via email")),jsx("p",{class:"text-muted text-sm mb-4 mt-2"},e?"You'll get a link to redeem the credit. Choose this if you want to send the link to the recipient yourself.":"We'll send an email on your behalf. Choose this if you want to stay anonymous or want it to be a surprise."),e?jsx(jsxFragment,null,jsx("p",null,jsx("label",{class:"input-label"},"Recipient name"),this.recipientEl=jsx("input",{type:"email",class:"w-full max-w-sm",placeholder:"Enter recipient name..."})),jsx("p",{class:"font-medium mb-2 mt-6"},"Summary")):jsx(jsxFragment,null,jsx("p",null,jsx("label",{class:"input-label"},"Recipient email"),this.recipientEl=jsx("input",{type:"email",class:"w-full max-w-sm",placeholder:"Enter recipient email..."})),jsx("p",{class:"font-medium mb-2 mt-6"},"Summary")))),this.codeOptionEl.addEventListener("change",()=>{let t=this.codeOptionEl.checked;this.updateGiftOptions(t)}),this.emailOptionEl.addEventListener("change",()=>{let t=this.codeOptionEl.checked;this.updateGiftOptions(t)})}updateSummary(){let e=this.getGiftAmount(),t=this.userCredit-e;if(this.hideError(),isNaN(e)){this.showError("Please enter a valid gift amount.");return}if(e<500){this.showError("You need to gift at least $5 worth of Obsidian Credit.");return}if(t<0){this.showError("You cannot gift more credit than you currently have.");return}if(this.userCredit-e<this.userCreditReceived){this.showError("You cannot gift credit which was received from another account.");return}this.summary.setValues({total:this.userCredit,eligible:this.userCredit-this.userCreditReceived,gift:e,remaining:t})}onOpen(){super.onOpen(),this.updateSummary()}},fe=class extends h{constructor(e,t,a){super(),this.code=e,this.setTitle("Redeem your credit"),a?(this.contentEl.append(jsx("p",null,"Unfortunately, we were unable to fetch your gift.")),this.showError(a)):(this.contentEl.append(jsx("p",null,"Someone has sent you a gift worth of $",S(t)," Obsidian Credit. How exciting!")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.redeemGift.bind(this)},"Redeem"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))))}redeemGift(){return d(this,null,function*(){try{yield ie({code:this.code}),new Ie().open()}catch(e){new oe(e).open()}})}},De=class extends h{constructor(){super(),this.setTitle("Redeem your credit"),this.contentEl.append(jsx("p",null,jsx("label",{class:"input-label"},"Your gift code"),this.codeField=jsx("input",{type:"text",placeholder:"Enter your gift code...",style:"width: 100%;"}))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.redeemGift.bind(this)},"Redeem"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}redeemGift(){return d(this,null,function*(){try{let e=this.codeField.value;if(e===""){this.showError("Please enter a redeem code.");return}yield ie({code:e}),new Ie().open()}catch(e){new oe(e).open()}})}},pe=class extends P{constructor(e,t,a){super(),this.link=`${location.origin}/account?giftcode=${e}`,a?this.setTitle("Successfully sent gift"):this.setTitle("Copied redeem link"),this.contentEl.append(jsx(jsxFragment,null,a?jsx("p",null,"You just sent a gift of ",S(t),' to "',a,'"!'):"",jsx("p",null,"The link to redeem the gift has been copied to your clipboard."),jsx("p",null,this.linkField=jsx("input",{type:"text",class:"mt-2 w-full",value:this.link}))))}onOpen(){super.onOpen(),navigator.clipboard.writeText(this.link),this.linkField.select()}},ke=class extends P{constructor(e,t,a){super(),this.code=e,a?this.setTitle("Successfully sent gift"):this.setTitle("Copied redeem code"),this.contentEl.append(jsx(jsxFragment,null,a?jsx("p",null,"You just sent a gift of ",S(t),' to "',a,'"!'):"",jsx("p",null,"The gift redeem code has been copied to your clipboard."),jsx("p",null,this.codeField=jsx("input",{type:"text",class:"mt-2 w-full",value:e}))))}onOpen(){super.onOpen(),navigator.clipboard.writeText(this.code),this.codeField.select()}},Ie=class extends P{constructor(){super(),this.setTitle("Gift redeemed"),this.contentEl.append(jsx("p",null,"Your gift was successfully redeemed!"),jsx("p",null,'You should be able to see the credit in the "Obsidian Credit" section. You can use it to buy any Obsidian service you want.'))}onClose(){super.onClose(),K(),location.reload()}},oe=class extends h{constructor(e){super(),this.setTitle("Gift not redeemed"),this.contentEl.append(jsx("p",null,"Unfortunately, we were unable to redeem your gift for you.")),this.showError(e)}}});function I(r,e,t){if(e<0||e>31||r>>>e)throw new RangeError("Value out of range");for(let a=e-1;a>=0;a--)t.push(r>>>a&1)}function $(r,e){return(r>>>e&1)!=0}function R(r){if(!r)throw new Error("Assertion error")}function Ia(r,e=10,t=X.HIGH,a=2){let o=xt.encodeText(r,t),s=o.size+a,i=createDiv();i.setCssStyles({display:"flex",flexDirection:"column"});for(let n=-a;n<s;n++){let u=i.createDiv();u.setCssStyles({display:"flex",flexDirection:"row",justifyContent:"center"});for(let l=-a;l<s;l++){let T=o.getModule(n,l);u.createDiv().setCssStyles({width:`${e}px`,height:`${e}px`,backgroundColor:T?"black":"white"})}}return i}var f,xt,v,ce,_,X,O,re,Ra=x(()=>{f=class f{constructor(e,t,a,o){this.version=e;this.errorCorrectionLevel=t;this.modules=[];this.isFunction=[];if(e<f.MIN_VERSION||e>f.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let s=[];for(let n=0;n<this.size;n++)s.push(!1);for(let n=0;n<this.size;n++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();let i=this.addEccAndInterleave(a);if(this.drawCodewords(i),o==-1){let n=1e9;for(let u=0;u<8;u++){this.applyMask(u),this.drawFormatBits(u);let l=this.getPenaltyScore();l<n&&(o=u,n=l),this.applyMask(u)}}R(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(e,t){let a=ce.makeSegments(e);return f.encodeSegments(a,t)}static encodeBinary(e,t){let a=ce.makeBytes(e);return f.encodeSegments([a],t)}static encodeSegments(e,t,a=1,o=40,s=-1,i=!0){if(!(f.MIN_VERSION<=a&&a<=o&&o<=f.MAX_VERSION)||s<-1||s>7)throw new RangeError("Invalid value");let n,u;for(n=a;;n++){let c=f.getNumDataCodewords(n,t)*8,m=ce.getTotalBits(e,n);if(m<=c){u=m;break}if(n>=o)throw new RangeError("Data too long")}for(let c of[X.MEDIUM,X.QUARTILE,X.HIGH])i&&u<=f.getNumDataCodewords(n,c)*8&&(t=c);let l=[];for(let c of e){I(c.mode.modeBits,4,l),I(c.numChars,c.mode.numCharCountBits(n),l);for(let m of c.getData())l.push(m)}R(l.length==u);let T=f.getNumDataCodewords(n,t)*8;R(l.length<=T),I(0,Math.min(4,T-l.length),l),I(0,(8-l.length%8)%8,l),R(l.length%8==0);for(let c=236;l.length<T;c^=253)I(c,8,l);let p=[];for(;p.length*8<l.length;)p.push(0);return l.forEach((c,m)=>p[m>>>3]|=c<<7-(m&7)),new f(n,t,p,s)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let a=0;a<t;a++)for(let o=0;o<t;o++)a==0&&o==0||a==0&&o==t-1||a==t-1&&o==0||this.drawAlignmentPattern(e[a],e[o]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,a=t;for(let s=0;s<10;s++)a=a<<1^(a>>>9)*1335;let o=(t<<10|a)^21522;R(o>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,$(o,s));this.setFunctionModule(8,7,$(o,6)),this.setFunctionModule(8,8,$(o,7)),this.setFunctionModule(7,8,$(o,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,$(o,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,$(o,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,$(o,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let a=0;a<12;a++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;R(t>>>18==0);for(let a=0;a<18;a++){let o=$(t,a),s=this.size-11+a%3,i=Math.floor(a/3);this.setFunctionModule(s,i,o),this.setFunctionModule(i,s,o)}}drawFinderPattern(e,t){for(let a=-4;a<=4;a++)for(let o=-4;o<=4;o++){let s=Math.max(Math.abs(o),Math.abs(a)),i=e+o,n=t+a;0<=i&&i<this.size&&0<=n&&n<this.size&&this.setFunctionModule(i,n,s!=2&&s!=4)}}drawAlignmentPattern(e,t){for(let a=-2;a<=2;a++)for(let o=-2;o<=2;o++)this.setFunctionModule(e+o,t+a,Math.max(Math.abs(o),Math.abs(a))!=1)}setFunctionModule(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0}addEccAndInterleave(e){let t=this.version,a=this.errorCorrectionLevel;if(e.length!=f.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");let o=f.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],s=f.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],i=Math.floor(f.getNumRawDataModules(t)/8),n=o-i%o,u=Math.floor(i/o),l=[],T=f.reedSolomonComputeDivisor(s);for(let c=0,m=0;c<o;c++){let C=e.slice(m,m+u-s+(c<n?0:1));m+=C.length;let J=f.reedSolomonComputeRemainder(C,T);c<n&&C.push(0),l.push(C.concat(J))}let p=[];for(let c=0;c<l[0].length;c++)l.forEach((m,C)=>{(c!=u-s||C>=n)&&p.push(m[c])});return R(p.length==i),p}drawCodewords(e){if(e.length!=Math.floor(f.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let o=0;o<this.size;o++)for(let s=0;s<2;s++){let i=a-s,u=(a+1&2)==0?this.size-1-o:o;!this.isFunction[u][i]&&t<e.length*8&&(this.modules[u][i]=$(e[t>>>3],7-(t&7)),t++)}}R(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let o;switch(e){case 0:o=(a+t)%2==0;break;case 1:o=t%2==0;break;case 2:o=a%3==0;break;case 3:o=(a+t)%3==0;break;case 4:o=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:o=a*t%2+a*t%3==0;break;case 6:o=(a*t%2+a*t%3)%2==0;break;case 7:o=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&o&&(this.modules[t][a]=!this.modules[t][a])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let i=!1,n=0,u=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[s][l]==i?(n++,n==5?e+=f.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,u),i||(e+=this.finderPenaltyCountPatterns(u)*f.PENALTY_N3),i=this.modules[s][l],n=1);e+=this.finderPenaltyTerminateAndCount(i,n,u)*f.PENALTY_N3}for(let s=0;s<this.size;s++){let i=!1,n=0,u=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[l][s]==i?(n++,n==5?e+=f.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,u),i||(e+=this.finderPenaltyCountPatterns(u)*f.PENALTY_N3),i=this.modules[l][s],n=1);e+=this.finderPenaltyTerminateAndCount(i,n,u)*f.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let i=0;i<this.size-1;i++){let n=this.modules[s][i];n==this.modules[s][i+1]&&n==this.modules[s+1][i]&&n==this.modules[s+1][i+1]&&(e+=f.PENALTY_N2)}let t=0;for(let s of this.modules)t=s.reduce((i,n)=>i+(n?1:0),t);let a=this.size*this.size,o=Math.ceil(Math.abs(t*20-a*10)/a)-1;return R(0<=o&&o<=9),e+=o*f.PENALTY_N4,R(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{let e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,a=[6];for(let o=this.size-7;a.length<e;o-=t)a.splice(1,0,o);return a}}static getNumRawDataModules(e){if(e<f.MIN_VERSION||e>f.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){let a=Math.floor(e/7)+2;t-=(25*a-10)*a-55,e>=7&&(t-=36)}return R(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(f.getNumRawDataModules(e)/8)-f.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*f.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let o=0;o<e-1;o++)t.push(0);t.push(1);let a=1;for(let o=0;o<e;o++){for(let s=0;s<t.length;s++)t[s]=f.reedSolomonMultiply(t[s],a),s+1<t.length&&(t[s]^=t[s+1]);a=f.reedSolomonMultiply(a,2)}return t}static reedSolomonComputeRemainder(e,t){let a=t.map(o=>0);for(let o of e){let s=o^a.shift();a.push(0),t.forEach((i,n)=>a[n]^=f.reedSolomonMultiply(i,s))}return a}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let a=0;for(let o=7;o>=0;o--)a=a<<1^(a>>>7)*285,a^=(t>>>o&1)*e;return R(a>>>8==0),a}finderPenaltyCountPatterns(e){let t=e[1];R(t<=this.size*3);let a=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(a&&e[0]>=t*4&&e[6]>=t?1:0)+(a&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};f.MIN_VERSION=1,f.MAX_VERSION=40,f.PENALTY_N1=3,f.PENALTY_N2=3,f.PENALTY_N3=40,f.PENALTY_N4=10,f.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],f.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];xt=f;v=class v{constructor(e,t,a){this.mode=e;this.numChars=t;this.bitData=a;if(t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(e){let t=[];for(let a of e)I(a,8,t);return new v(re.BYTE,e.length,t)}static makeNumeric(e){if(!v.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let a=0;a<e.length;){let o=Math.min(e.length-a,3);I(parseInt(e.substring(a,a+o),10),o*3+1,t),a+=o}return new v(re.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!v.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],a;for(a=0;a+2<=e.length;a+=2){let o=v.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a))*45;o+=v.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a+1)),I(o,11,t)}return a<e.length&&I(v.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a)),6,t),new v(re.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:v.isNumeric(e)?[v.makeNumeric(e)]:v.isAlphanumeric(e)?[v.makeAlphanumeric(e)]:[v.makeBytes(v.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)I(e,8,t);else if(e<16384)I(2,2,t),I(e,14,t);else if(e<1e6)I(6,3,t),I(e,21,t);else throw new RangeError("ECI assignment value out of range");return new v(re.ECI,0,t)}static isNumeric(e){return v.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return v.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let a=0;for(let o of e){let s=o.mode.numCharCountBits(t);if(o.numChars>=1<<s)return 1/0;a+=4+s+o.bitData.length}return a}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let a=0;a<e.length;a++)e.charAt(a)!="%"?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t}};v.NUMERIC_REGEX=/^[0-9]*$/,v.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,v.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";ce=v,_=class _{constructor(e,t){this.ordinal=e;this.formatBits=t}};_.LOW=new _(0,1),_.MEDIUM=new _(1,0),_.QUARTILE=new _(2,3),_.HIGH=new _(3,2);X=_,O=class O{constructor(e,t){this.modeBits=e;this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};O.NUMERIC=new O(1,[10,12,14]),O.ALPHANUMERIC=new O(2,[9,11,13]),O.BYTE=new O(4,[8,16,16]),O.KANJI=new O(8,[8,10,12]),O.ECI=new O(7,[0,0,0]);re=O});var Ha,gt,bt,yt,vt,Re,He,wt,Et,Ct,St,Ne,Pt=x(()=>{q();D();z();W();Y();Ra();Ha={href:"/account/profile",display:"Profile",icon:nt},gt=class extends h{constructor(e){super(),this.userInfo=e,this.setTitle("Change your email"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"New email"),this.emailEl=jsx("input",{class:"input w-full max-w-sm",type:"email",placeholder:"Enter your new email address..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your password..."})),this.mfaSectionEl=jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"6-digit code"),this.mfaEl=jsx("input",{class:"input w-full max-w-sm",inputMode:"numeric",type:"text"})))),this.mfaSectionEl.toggle(e.mfa),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Confirm change"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),Z(this.emailEl,()=>this.passwordEl.focus()),Z(this.passwordEl,()=>this.update())}update(){return d(this,null,function*(){let e=this.emailEl.value,t=this.passwordEl.value,a=this.mfaEl.value;if(e===""){this.showError("New email cannot be empty.");return}if(t===""){this.showError("Password cannot be empty.");return}if(this.userInfo.mfa&&a===""){this.showError("Please enter the 6-digit code generated by your authenticator app to confirm email change.");return}try{yield Zt({email:e,password:t,mfa:a}),this.close(),new L("Successfully updated","Your email has been successfully updated!").open()}catch(o){o.contains("2FA code required")&&this.mfaSectionEl.show(),this.showError(o)}})}},bt=class extends h{constructor(){super(),this.setTitle("Change your name"),this.contentEl.append(jsx("p",null,jsx("label",{class:"input-label"},"New name"),this.nameEl=jsx("input",{class:"input w-full change-name-new-name",type:"text",placeholder:"Enter your new name..."}))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Confirm change"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),Z(this.nameEl,()=>this.update())}update(){return d(this,null,function*(){let e=this.nameEl.value;if(e===""){this.showError("New name cannot be empty.");return}try{yield Kt({name:e}),this.close(),new L("Successfully updated","Your name has been successfully updated!").open()}catch(t){this.showError(t)}})}},yt=class extends h{constructor(){super(),this.setTitle("Change your password"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Current password"),this.oldPassEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your old password..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"New password"),this.newPassEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your new password..."})))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Confirm change"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),Z(this.oldPassEl,()=>this.newPassEl.focus()),Z(this.newPassEl,()=>this.update())}update(){return d(this,null,function*(){let e=this.oldPassEl.value,t=this.newPassEl.value;if(e===""){this.showError("Current password cannot be empty.");return}if(t===""){this.showError("New password cannot be empty.");return}try{yield Xt({old_password:e,new_password:t}),this.close(),new L("Successfully updated","Your password has been successfully updated!").open()}catch(a){this.showError(a)}})}},vt=class extends h{constructor(e,t){super(),this.secret=e,this.setTitle("Enable 2-factor authentication");let a;this.contentEl.append(jsx("form",{id:"mfa-form",onsubmit:this.update.bind(this)},jsx("p",{class:"mb-2 font-semibold"},"Step 1: Download an authenticator app"),jsx("p",{class:"mb-2"},"Download and install an authenticator app on your phone, such as Google Authenticator or\xA0Authy."),jsx("p",{class:"mb-2 font-semibold"},"Step 2: Scan the QR code"),jsx("p",{class:"mb-2"},"Scan the QR code below with your authenticator app, or use the setup key below."),a=jsx("p",{className:"my-8"}),jsx("p",{class:"my-8"},jsx("input",{type:"text",class:"w-full",value:e,readOnly:!0})),jsx("p",{class:"mb-2 font-semibold"},"Step 3: Verify your code"),jsx("p",{class:"mb-2"},"Enter the 6 digit code generated by your authenticator app"),jsx("p",{class:"my-2"},this.codeEl=jsx("input",{class:"input w-full max-w-sm",type:"text",placeholder:"Enter 6-digit code...",required:!0})),jsx("p",{class:"mt-6 mb-2 font-semibold"},"Step 4: Enter your current password to confirm"),jsx("p",{class:"my-2"},this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter password to confirm...",autocomplete:"current-password",required:!0})))),a.appendChild(Ia(t,5,X.LOW)),this.buttonContainerEl.append(jsx(jsxFragment,null,this.submitBtnEl=jsx("button",{type:"submit",class:"button button-primary"},"Complete set up"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),this.submitBtnEl.setAttr("form","mfa-form")}update(e){return d(this,null,function*(){e.preventDefault();let t=this.codeEl.value,a=this.passwordEl.value;if(t===""){this.showError("Please enter the 6-digit code generated by your authenticator app to enable 2FA.");return}if(a===""){this.showError("Please enter your password to enable 2FA.");return}try{let o=yield Xe({secret:this.secret,password:a,mfa:t});if(!o.recovery_codes)throw new Error("Please try again later.");this.close(),new Re("2-factor authentication is ready","You have successsfully set up 2FA to protect your account!",o.recovery_codes).open()}catch(o){this.showError(o)}})}},Re=class extends L{constructor(e,t,a){super(e,t);let o=this.messageContainerEl.createDiv({cls:"mt-4"});o.createEl("p",{text:"We strongly recommend storing these recovery codes in a safe place. Each code may be used once."});let s=o.createDiv({cls:"flex flex-col gap-y-8 sm:flex-row sm:justify-around items-center mt-4"});s.createDiv({cls:"font-mono"},T=>{let p=T.createEl("ul");for(let c of a)p.createEl("li",{text:c})});let i=s.createDiv({cls:"flex flex-col gap-y-4"}),n=i.createEl("button",{cls:"button button-primary",text:"Copy Recovery Codes"});n.addEventListener("click",()=>{navigator.clipboard.writeText(a.join(`
`)),n.setText("Copied!"),setTimeout(()=>n.setText("Copy Recovery Codes"),1e3)});let u=encodeURIComponent(a.join(`
`));i.createEl("a",{cls:"button button-primary",text:"Download Recovery Codes",href:"data:text/plain;charset=utf-8,"+u}).setAttribute("download","obsidian-recovery-codes.txt")}},He=class extends h{constructor(e,t){super(),this.setTitle(e),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"mb-2"},"Verify your identity by entering your current password and 6-digit verification code from your authenticator app."),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter password..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"6-digit code"),this.codeEl=jsx("input",{class:"input w-full max-w-sm",type:"number",placeholder:"000000"})),jsx("p",{class:"my-2"},this.useRecoveryCodeBtn=jsx("button",{type:"button",class:"font-medium text-sm text-accent"},"Use recovery code")),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Recovery code"),this.recoveryCodeEl=jsx("input",{class:"input w-full max-w-sm",type:"text"})))),this.recoveryCodeEl.parentElement.hide(),this.useRecoveryCodeBtn.addEventListener("click",()=>{this.useRecoveryCodeBtn.parentElement.hide(),this.codeEl.parentElement.hide(),this.codeEl.value="",this.recoveryCodeEl.parentElement.show()}),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},t),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}},wt=class extends He{constructor(){super("Disable 2-factor authentication","Disable 2FA")}update(){return d(this,null,function*(){let e=this.recoveryCodeEl.value,t=this.codeEl.value,a=this.passwordEl.value;if(t===""&&e===""){this.recoveryCodeEl.isShown()?this.showError("Please enter an unused recovery code to disable 2FA."):this.showError("Please enter the 6-digit code generated by your authenticator app to disable 2FA.");return}if(a===""){this.showError("Please enter your password to confirm disabling 2FA.");return}try{yield _t({password:a,mfa:t,recovery_code:e}),this.close(),new L("2-factor authentication is disabled","You have successsfully disabled 2-factor authentication on your account.").open()}catch(o){this.showError(o)}})}},Et=class extends He{constructor(){super("Refresh 2-factor authentication recovery codes","Refresh")}update(){return d(this,null,function*(){let e=this.recoveryCodeEl.value,t=this.codeEl.value,a=this.passwordEl.value;if(t===""&&e===""){this.recoveryCodeEl.isShown()?this.showError("Please enter an unused recovery code to refresh your recovery codes."):this.showError("Please enter the 6-digit code generated by your authenticator app to refresh your recovery codes.");return}if(a===""){this.showError("Please enter your password to confirm refreshing your recovery codes.");return}try{let o=yield Wt({password:a,mfa:t,recovery_code:e});if(!o.recovery_codes||!o.success)throw new Error("Please try again later.");this.close(),new Re("2-factor authentication recovery codes refreshed","You have successfully refreshed your 2FA recovery codes. Any previously unused codes will no longer be accepted.",o.recovery_codes).open()}catch(o){this.showError(o)}})}},Ct=class extends h{constructor(){super(),this.setTitle("Log out everywhere"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",null,"Any devices currently logged into your Obsidian account will lose their connection."),jsx("p",{class:"my-2 text-red-500"},"This action is not reversible."),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter your password to confirm...",autocomplete:"current-password",required:!0})))),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-danger",onclick:this.confirm.bind(this)},"Confirm log out"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),Z(this.passwordEl,()=>this.confirm())}confirm(){return d(this,null,function*(){let e=this.passwordEl.value;if(e===""){this.showError("You must enter your current password to confirm.");return}try{yield jt({password:e}),this.close(),window.location.reload()}catch(t){this.showError(t)}})}},St=class extends h{constructor(e){super(),this.userInfo=e,this.setTitle("Delete your account"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",{class:"mb-2"},"Deleting your account is a permanent action with significant consequences. Before proceeding, carefully review the following information:"),jsx("ul",{class:"list-disc pl-4 marker:text-faint my-4"},jsx("li",null,"All your commercial licenses and Catalyst licenses will be\xA0revoked."),jsx("li",null,"Your subscriptions to Obsidian Publish and Obsidian Sync will be\xA0terminated."),jsx("li",null,"Your Obsidian Sync remote vaults and Obsidian Publish sites will be permanently deleted."),jsx("li",null,"Payments associated with your account will not be eligible for refunds.")),jsx("p",{class:"my-2 text-red-500"},"Important: Account deletion is irreversible. Once your account is deleted, it cannot be recovered under any circumstances."),jsx("p",{class:"my-2"},"If you fully understand the consequences outlined above and still wish to proceed, please confirm by entering your email and password below:"),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Email"),this.emailEl=jsx("input",{class:"input w-full max-w-sm",type:"email",placeholder:"Enter email to confirm..."})),jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"Password"),this.passwordEl=jsx("input",{class:"input w-full max-w-sm",type:"password",placeholder:"Enter password to confirm..."})),this.mfaSectionEl=jsx("p",{class:"my-2"},jsx("label",{class:"input-label"},"6-digit code"),this.mfaEl=jsx("input",{class:"input w-full max-w-sm",inputMode:"numeric",type:"text"})))),this.mfaSectionEl.toggle(e.mfa),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-danger mod-warning",onclick:this.update.bind(this)},"Confirm deletion"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel"))),Z(this.emailEl,()=>this.passwordEl.focus())}update(){return d(this,null,function*(){let e=this.emailEl.value,t=this.passwordEl.value,a=this.mfaEl.value;if(e===""){this.showError("Please enter your email to confirm account deletion.");return}if(t===""){this.showError("Please enter your password to confirm account deletion.");return}if(this.userInfo.mfa&&a===""){this.showError("Please enter the 6-digit code generated by your authenticator app to confirm account deletion.");return}try{yield Jt({email:e,password:t,mfa:a}),this.close(),new L("Successfully deleted","Your account is now deleted!").open()}catch(o){o.contains("2FA code required")&&this.mfaSectionEl.show(),this.showError(o)}})}},Ne=class extends k{constructor(e){super("profile","Your profile"),this.page=e;let t=this.settings=new F(this.contentEl);this.nameSetting=t.addSetting(new y().setName("Name").addButton("Change",()=>{new bt().open()})),this.nameSetting.descEl.className="text-xl",this.emailSetting=t.addSetting(new y().setName("Email").addButton("Change",()=>{new gt(e.data).open()})),this.emailSetting.descEl.className="text-xl",t.addSetting(new y().setName("Password").setDesc("Change your account\xA0password.").addButton("Change",()=>{new yt().open()})),this.mfaSetting=t.addSetting(new y().setName("2-factor authentication").setDesc("Protect your account with a second verification\xA0step.")),t.addSetting(new y().setName("Contact support").setDesc("Reach us for account, billing, or paid service\xA0inquiries.").addLink("Email us","mailto:support@obsidian.md")),t.addSetting(new y().setName("Log out everywhere").setDesc("Log out on all devices for security reasons. You will need to log in again on each\xA0device.").addButton("Log out",()=>{new Ct().open()})),t.addSetting(new y().setName("Delete account").setDesc("Permanently delete your account, licenses, and subscriptions. You will be asked for confirmation before deletion\xA0proceeds.").addDangerButton("Delete",()=>{new St(e.data).open()}))}getNavInfo(){return Ha}update(){let{data:e}=this.page;this.nameSetting.setDesc(e.name),this.emailSetting.setDesc(e.email),e.mfa?(this.mfaSetting.addButton("Disable",()=>{new wt().open()}),this.mfaSetting.setDesc(createFragment(t=>t.append(jsx(jsxFragment,null,"2FA is enabled for your account.\xA0",jsx("a",{class:"text-accent font-medium cursor-pointer",onclick:()=>new Et().open()},"Refresh\xA0recovery\xA0codes.")))))):this.mfaSetting.addButton("Enable",()=>d(this,null,function*(){let t=yield Xe();new vt(t.secret,t.url).open()}))}}});var se,Tt,Mt,Lt=x(()=>{D();z();H();se=class extends N{constructor(){super(),this.setTitle("Your invoices"),this.contentEl.appendChild(this.invoiceEl=jsx("div",{class:"invoice-list space-y-4 gap-4 divide-y divide-gray-700"}))}onOpen(){return d(this,null,function*(){let{invoiceEl:e}=this;e.empty();let t=yield ia();for(let a of t)e.createDiv({cls:"invoice-item setting pt-4 flex gap-6 items-center"},o=>{o.createDiv({cls:"setting-item-info"},s=>{s.createDiv({text:a.description,cls:"setting-item-name leading-tight mb-1"}),s.createDiv({text:B(a.created),cls:"text-muted leading-5 text-sm"})}),o.createDiv({cls:"setting-item-control ml-auto flex flex-row gap-2"},s=>{s.createEl("button",{cls:"button  min-w-[5rem] button-sm sm:button-md",text:"View"},i=>{i.addEventListener("click",()=>{let n=new Tt;n.display(a),n.open()})}),a.refundable&&s.createEl("a",{text:"Refund",cls:"button  min-w-[5rem] button-sm sm:button-md"},i=>{i.addEventListener("click",()=>{new Mt(a).open(),fish(".modal-container.mod-confirm-refund").show()})})})});t.length===0&&e.append(jsx("p",null,"There are no invoices for this account."))})}},Tt=class extends N{constructor(){super(),this.setTitle("Invoice #"),this.contentEl.append(jsx("div",{class:"print-invoice flex mb-6 print:hidden"},jsx("button",{class:"button button-primary",onclick:()=>window.print()},"Print invoice"))),this.contentEl.appendChild(jsx("div",{class:"invoice-box print:text-black print:w-full"},jsx("table",{cellPadding:"0",cellSpacing:"0",class:"print:w-full"},jsx("tbody",null,jsx("tr",null,jsx("td",{colSpan:2},jsx("table",{class:"print:w-full"},jsx("tbody",null,jsx("tr",null,jsx("td",{class:"py-4 border-b border-gray-700"},jsx("div",null,jsx("b",{class:"text-lg"},"Dynalist Inc.")),jsx("div",{class:"text-sm"},"1376 Ferncrest Road",jsx("br",null),"Oakville, L6H 7W3",jsx("br",null),"Ontario, Canada",jsx("br",null),"GST/HST 75064 9899 RT0001")),jsx("td",{class:"py-4 border-b border-gray-700 text-right"},jsx("div",null,jsx("b",null,"Invoice #",this.invoiceNumberEl=jsx("span",null))),this.dateEl=jsx("div",{class:"text-sm"}))))))),jsx("tr",null,jsx("td",{colSpan:2,class:"py-4"},jsx("div",null,jsx("b",null,"Bill to")),this.billingInfoEl=jsx("div",{class:"my-2 py-1 px-2 w-[102%] inline-block whitespace-pre-wrap rounded -ml-2 hover:cursor-pointer hover:ring hover:ring-gray-600 hover:bg-gray-800 focus:outline-none focus:ring focus:ring-accent-600 focus:cursor-text",contentEditable:"true"},"Click to edit your billing information"))),jsx("tr",{class:"heading border-b border-gray-700 tabular-nums"},jsx("td",{class:"pt-4 pb-2"},jsx("b",null,"Items")),jsx("td",{class:"pt-4 pb-2 text-right"},jsx("b",null,"Price"))),jsx("tr",{class:"item border-b border-gray-700 tabular-nums"},this.descEl=jsx("td",{class:"py-2"}),jsx("td",{class:"py-2 text-right"},"$",this.amountEl=jsx("span",null)," USD")),this.refundEl=jsx("tr",{class:"item mod-refund tabular-nums"},jsx("td",{class:"py-2"},"Refund"),jsx("td",{class:"py-2 text-right"},"-$",this.refundAmountEl=jsx("span",null)," USD")),jsx("tr",{class:"total tabular-nums"},jsx("td",{class:"py-2"}),jsx("td",{class:"py-2 text-right"},jsx("b",null,"Total:")," $",this.totalEl=jsx("span",null)," USD")))))),this.billingInfoEl.addEventListener("input",()=>{localStorage.setItem("billing-info",this.billingInfoEl.getText())})}display(e){let t=(e.amount/100).toFixed(2),a=(e.refunded/100).toFixed(2),o=((e.amount-e.refunded)/100).toFixed(2),s=e.refunded!==0,i=localStorage.getItem("billing-info"),n=e.receipt_number||e.id;this.setTitle("Invoice #"+n),this.invoiceNumberEl.setText(n),this.dateEl.setText(B(e.created)),this.descEl.setText(e.description),this.amountEl.setText(t),this.refundEl.toggle(s),s&&this.refundAmountEl.setText(a),this.totalEl.setText(o),i&&this.billingInfoEl.setText(i)}},Mt=class extends h{constructor(e){super(),this.info=e,this.setTitle("Confirm refund"),this.contentEl.append(jsx(jsxFragment,null,jsx("p",null," Would you like to request a refund for this payment? "),jsx("p",null,e.description),jsx("p",{class:"text-red-500 my-2"},"The service or license you purchased will be removed, and this action is not\xA0reversible. Your auto-renewal will also be canceled."))),e.service==="sync"?this.contentEl.append(jsx("p",{class:"text-red-500 my-2"},"Your Obsidian Sync remote vaults will be immediately deleted.")):e.service==="publish"&&this.contentEl.append(jsx("p",{class:"text-red-500 my-2"},"Your Obsidian Publish sites will be immediately deleted.")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.update.bind(this)},"Request refund"),jsx("button",{class:"button",onclick:this.close.bind(this)},"Cancel")))}update(){return d(this,null,function*(){try{yield la({charge:this.info.id,type:this.info.type}),this.close(),new L("Refund success",createFragment(e=>e.append(jsx(jsxFragment,null,jsx("p",null,"Your refund request has been successfully processed!"),jsx("p",null,"The service or license you purchased has been removed, and your auto-renewal has been canceled."),jsx("p",null,"You should receive your refund in a few business days. Thanks for trying Obsidian!"))))).open()}catch(e){fish(".refund-failed-reason").setText(e),fish(".modal-container.mod-refund-failed").show(),this.close(),new L("Refund failed",createFragment(t=>t.append(jsx(jsxFragment,null,jsx("p",null,"Automatic refund has failed. ",jsx("span",null,e.toString())),jsx("p",null,"If you believe you still qualify for a refund, you can contact our support at support@obsidian.md."))))).open()}})}}});var At,Fe,Bt=x(()=>{q();D();Lt();W();H();Y();At={href:"/account/commercial",display:"License",icon:Qe},Fe=class extends k{constructor(e){super("commercial","Commercial license"),this.page=e}getNavInfo(){return At}update(){let{business:e}=this.page.subscriptions,{contentEl:t}=this;if(t.empty(),e&&e.expiry>=Date.now()){let{seats:a,expiry:o,key:s,company:i,renew:n}=e,u=a===1?"1 seat":a+" seats",l=B(o);if(g.get("order_success")==="business"){let p=this.banner=new A;p.addContentMessage("Your purchase was successful. Thank you for your support!"),p.addContent(jsx("p",null,"To activate your commercial license, go to ",jsx("span",{class:"font-medium"},"Settings \u2192 General")," in Obsidian.")),t.append(p.containerEl)}else if(g.get("change_success")==="business"){let p=this.banner=new A;p.addContentMessage("The number of seats on your license has been successfully changed!"),t.append(p.containerEl)}t.append(jsx("div",{class:"pt-4"},jsx("p",null,"Your license key is: "),jsx("div",{class:"commercial-license-key bg-secondary",onclick:function(){navigator.clipboard.writeText(s),this.setText("Copied!"),this.addClass("is-copied"),setTimeout(()=>{this.setText(s),this.removeClass("is-copied")},500)}},s),jsx("p",null,'Registered to "',i,'" for ',u,". Valid until ",l,".")));let T=new F(t);T.addSetting(new y().setName("Seats").setDesc(`${u} purchased.`).addButton("Update seats",()=>window.location.assign("/buy/license"))),T.addSetting(new y().setName("Invoices").setDesc("View and print invoices for your commercial license.").addButton("View",()=>{new se().open()})),T.addSetting(new y().setName("Auto-renewal").setDesc(n?`Your next renewal will be ${l}.`:`Your license expires ${l}. Your license will not be\xA0renewed.`).addButton(n?"Stop":"Resume",()=>d(this,null,function*(){n?yield U({type:"business",renew:""}):yield U({type:"business",renew:"yearly"}),window.location.reload()})))}else t.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{class:"mt-4 leading-tight max-w-xl md:text-lg md:mt-0"},"Obsidian is free for personal use. For organizations with two or more employees, a commercial license is required. ",jsx("a",{href:"https://help.obsidian.md/Teams/Commercial+license",target:"_blank",class:"text-accent font-medium"},"Learn\xA0more.")),jsx("div",{class:"text-muted mb-6 text-xs sm:text-sm md:text-base mt-2"},"Obsidian is free to use commercially for 14 days for evaluation\xA0purposes."),jsx("div",null,jsx("span",{class:"text-2xl font-semibold"},"$50")," ",jsx("span",{class:"text-sm text-muted"},"USD")),jsx("div",{class:"text-muted text-xs sm:text-sm"},"per user, per\xA0year")),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button text-base md:text-sm button-md button-primary w-full",onclick:()=>window.location.assign("/buy/license")},"Buy license"))))}}});var Dt,Oe,Ue,kt=x(()=>{q();D();pt();ht();Lt();W();H();ct();Y();z();ue();Dt={href:"/account/billing",display:"Billing",icon:tt},Oe=class r extends h{constructor(){super(),this.setTitle("Sales tax")}onOpen(){return d(this,null,function*(){ge(r.prototype,this,"onOpen").call(this),this.contentEl.addClass("relative"),this.setLoading(!0);let e=this.errorEl.parentElement,t,a,o,s;try{let i=yield ta();t=i.certs,a=i.country,o=i.vat_number,s=i.postal_code}catch(i){this.showError(i)}if(this.contentEl.insertBefore(jsx("div",{class:"mb-4"},jsx("p",{class:"mb-2"},"Obsidian is required to collect taxes in certain jurisdictions. We use your location to determine the taxes that should be applied. ",jsx("a",{class:"underline text-accent cursor-pointer",href:"https://help.obsidian.md/sales-tax",target:"_blank"},"Learn\xA0more"),".")),e),t&&t.length>0){let i;this.contentEl.insertBefore(jsx("div",null,jsx("p",{class:"border-b border-gray-700 pb-2 font-semibold"},"Your exemption certificates"),jsx("div",{class:"mx-8 py-4"},jsx("table",{class:"table-auto min-w-full"},jsx("thead",{class:"border-b border-gray-700"},jsx("tr",null,jsx("td",null,"State"),jsx("td",null,"Created"),jsx("td",null,"Remove"))),i=jsx("tbody",null)))),e);for(let n of t)i.appendChild(jsx("tr",null,jsx("td",null,n.juris.substring(3)),jsx("td",null,new Date(n.created_ts).toLocaleDateString()),jsx("td",null,jsx("a",{href:"#",class:"text-muted hover:text-red-400",onclick:()=>{this.deleteCertificate(n.id)}},V(st)))))}this.contentEl.insertBefore(jsx(jsxFragment,null,jsx("div",null,jsx("p",{class:"border-b border-gray-700 pb-2 font-semibold"},"Location"),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"Country"),this.countryDropdownEl=jsx("select",null)),this.caMsgEl=jsx("p",{class:"mt-4"},"Tax exemptions are not available in Canada.")),this.fileUploadSectionEl=jsx("div",{class:"mt-8 mb-4"},jsx("p",{class:"border-b border-gray-700  pb-2 font-semibold"},"Tax exemption certificate"),jsx("p",{class:"text-muted text-sm py-2"},"Upload an image or PDF containing your tax exemption certificate. Maximum 3MB file size."),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"Zip code"),this.postalCodeEl=jsx("input",{type:"text",value:s,placeholder:"Your zip code"})),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"Certificate file"),this.fileUploadInputEl=jsx("input",{type:"file",accept:"image/*,.pdf",id:"input"}))),this.vatSectionEl=jsx("div",{class:"mt-8 mb-4"},jsx("p",{class:"border-b border-gray-700  pb-2 font-semibold"},"VAT number"),jsx("p",{class:"text-muted text-sm py-2"},"Depending on your location, you may add your Tax Identification Number (TIN), VAT Number, or VAT ID. The format depends on your country."),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"VAT number"),this.vatNumberEl=jsx("input",{type:"text",value:o,placeholder:"VAT number"})))),e);for(let i in Ke){let n=Ke[i];this.countryDropdownEl.createEl("option",{value:i,text:n})}this.countryDropdownEl.value=a||"US",this.countryDropdownEl.addEventListener("change",this.updateDisplayedFields.bind(this)),this.uploadBtn=this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Upload"}),this.uploadBtn.addEventListener("click",this.upload.bind(this)),this.buttonContainerEl.createEl("button",{cls:"button ml-2",text:"Cancel"}).addEventListener("click",this.close.bind(this)),this.updateDisplayedFields(),this.setLoading(!1)})}deleteCertificate(e){return d(this,null,function*(){try{yield aa({certificate_id:e}),this.close(),new L("Successfully deleted","Your exemption certificate has been deleted.").open()}catch(t){console.error(t),this.showError("Failed to delete certificate. Please try again.")}})}updateDisplayedFields(){let{caMsgEl:e,fileUploadSectionEl:t,postalCodeEl:a,uploadBtn:o,vatSectionEl:s}=this;switch(this.countryDropdownEl.value){case"":case"US":e.hide(),s.hide(),a.parentElement.show(),t.show(),o.disabled=!1,o.removeClass("mod-disabled"),o.setText("Upload");break;case"CA":e.show(),s.hide(),a.parentElement.hide(),t.hide(),o.disabled=!0,o.addClass("mod-disabled"),o.setText("Save");break;default:e.hide(),s.show(),a.parentElement.hide(),t.hide(),o.disabled=!1,o.removeClass("mod-disabled"),o.setText("Save");break}}upload(){return d(this,null,function*(){let{countryDropdownEl:e,postalCodeEl:t,uploadBtn:a,vatNumberEl:o}=this;if(this.hideError(),e.removeClass("input-error"),t.removeClass("input-error"),o.removeClass("input-error"),!e.value){this.showError("Please select your country"),e.addClass("input-error");return}if(e.value==="CA"){this.showError("Tax exemptions are not available in Canada.");return}a.disabled=!0,a.addClass("mod-disabled");try{e.value==="US"?yield this.uploadCertificate():yield this.updateVAT()}finally{a.disabled=!1,a.removeClass("mod-disabled")}})}uploadCertificate(){return d(this,null,function*(){let{fileUploadInputEl:e,postalCodeEl:t}=this;if(!t.value){this.showError("Please enter your postal code"),t.addClass("input-error");return}let a=e.files;if(a.length===0){this.showError("Please select a file to upload.");return}else if(a.length>1){this.showError("Please select a single file to upload.");return}let o=yield a.item(0).arrayBuffer(),s=zt(new Uint8Array(o)),i={postal_code:t.value,certificate:s,certificate_name:a.item(0).name},n=JSON.stringify(i),u=new TextEncoder().encode(n).length;if(u>4.75*1024*1024){console.log(u/1024/1024),this.showError("Exceeded maximum attachment size.");return}try{yield oa(i),this.close(),new L("Successfully uploaded","Your tax exemption certificate has been received.").open()}catch(l){this.showError(l)}})}updateVAT(){return d(this,null,function*(){let{vatNumberEl:e}=this;if(!e.value){this.showError("Please enter your VAT number"),e.addClass("input-error");return}try{yield ra({vat_number:e.value}),this.close(),new L("Successfully saved","Your VAT number has been received.").open()}catch(t){this.showError(t)}})}setLoading(e){this.contentEl.toggleClass("loading",e)}},Ue=class extends k{constructor(e){if(super("billing","Billing"),this.page=e,g.get("order_success")==="credit"){let a=this.banner=new A;a.addContent(jsx("p",{class:""},"Your Credit purchase was successful! You can now use credit to pay for ",jsx("a",{href:"/account/sync",class:"text-accent font-medium"},"Sync"),", ",jsx("a",{href:"/account/publish",class:"text-accent font-medium"},"Publish"),", ",jsx("a",{href:"/account/catalyst",class:"text-accent font-medium"},"Catalyst"),", or ",jsx("a",{href:"/account/commercial",class:"text-accent font-medium"},"commercial licenses"),". You can also send credit to others.")),this.contentEl.append(a.containerEl)}let t=this.settings=new F(this.contentEl);t.addSetting(new y().setName("Obsidian Credit").setDesc(createFragment(a=>a.append(jsx(jsxFragment,null,jsx("div",{class:"text-normal text-lg pb-2 leading-6"},"$",this.creditAmountEl=jsx("span",null,"0")," USD balance"),jsx("div",{class:"text-muted leading-4 mt-1 text-xs sm:text-sm md:text-base max-w-xl"},"Credit can be used to pay for any Obsidian license or service, including Sync and Publish. Any credit you have will be used before we charge your payment method."))))).addPrimaryButton("Buy credit",()=>window.location.assign("/buy/credit")).addButton("Send credit",()=>new Be(e.data.credit,e.data.credit_received).open(),a=>this.sendCreditButtonEl=a)),t.addSetting(new y().setName("Invoices and refunds").setDesc("Download invoices for your past payments and request\xA0refunds.").addButton("View",()=>new se().open())),t.addSetting(new y().setName("Payment method").setDesc("View and modify the card you use for payments").addButton("Manage",()=>{new Ae().open()})),t.addSetting(new y().setName("Tax exemption").setDesc("Add and manage tax exemptions.").addButton("Manage",()=>{new Oe().open()})),this.discountSetting=t.addSetting(new y().setName("Discount").addButton("Apply",()=>new Te().open(),a=>this.applyDiscountButtonEl=a)),this.giftSetting=t.addSetting(new y().setName("Gift history").addButton("Redeem",()=>new De().open()))}getNavInfo(){return Dt}update(){let{discountSetting:e,applyDiscountButtonEl:t}=this,{credit:a,discount:o}=this.page.data;if(this.sendCreditButtonEl.toggle(a>0),this.creditAmountEl.setText(S(a)),o){if(o.status==="submitted")e.setDesc("You have submitted your school or organization email, but have not completed email verification yet. Please check your email for a link to verify your email address."),t.hide();else if(o.status==="verified")e.setDesc("Your discount application has been submitted for review. Thanks for your patience!"),t.hide();else if(o.status==="approved"){let{type:s,expiry_ts:i}=o;e.setDesc(`Your ${s} discount currently gives you 40% off the regular price of Obsidian Sync and Publish. Your discount will expire on ${B(i)}.`),t.setText("Renew")}}else e.setDesc(createFragment(s=>s.append(jsx(jsxFragment,null,"Students, faculty members, and nonprofit employees are eligible for a 40% discount on Obsidian Sync and\xA0Publish. ",jsx("a",{href:"https://help.obsidian.md/Licenses+and+payment/Education+and+non-profit+discount",target:"_blank",class:"text-accent font-medium"},"Learn\xA0more."))))),t.show(),t.setText("Apply");this.updateGift(this.page.gifts)}updateGift(e){let{giftSetting:t}=this;if(t.setDesc("You haven't sent or received any\xA0credit."),!e||e.length===0)return;let a=createFragment();e.sort((o,s)=>o.ts-s.ts);for(let o of e)o.type==="sent"?a.append(jsx("p",null,"You sent $",S(o.amount),' to "',o.recipient,'" on ',B(o.ts),".",jsx("span",null," "),o.redeemed?jsx(jsxFragment,null,jsx("br",null),jsx("span",null,"Your gift was ",o.is_cancelled?"cancelled":"redeemed"," on ",B(o.redeemed_ts),".")):jsx(jsxFragment,null,"Copy ",jsx("a",{href:"#",class:"text-accent",onclick:s=>{s.preventDefault(),new pe(o.redeem_code).open()}},"redeem link"),jsx("span",null," or "),jsx("a",{href:"#",class:"text-accent",onclick:s=>{s.preventDefault(),new ke(o.redeem_code).open()}},"redeem code"),".",jsx("br",null),jsx("span",null,"Waiting for recipient to redeem gift. "),jsx("a",{href:"#",class:"text-accent",onclick:s=>d(this,null,function*(){if(s.preventDefault(),!!confirm("Are you sure you want to cancel this gift? Your credit will be refunded, and the recipient will no longer be able to redeem it."))try{yield ie({code:o.redeem_code}),location.reload()}catch(n){new oe(n).open()}})},"Cancel this gift"),"."))):o.type==="received"&&a.append(jsx("p",null,"You redeemed $",S(o.amount)," worth of gift credit on ",B(o.ts),"."));t.setDesc(a)}}});var Rt,me,It,Ge,ze=x(()=>{q();D();z();W();Y();H();Y();Rt={href:"/account/publish",display:"Publish",icon:rt},me=class extends h{constructor(e,t,a,o){super(),this.code=e,this.setTitle("Publish site invite"),o?this.showError(o):(this.contentEl.append(jsx("p",null,t," (",a,") has invited you to collaborate on an Obsidian Publish site together.")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.acceptInvite.bind(this)},"Accept"),jsx("button",{onclick:this.close.bind(this)},"Cancel"))))}acceptInvite(){return d(this,null,function*(){try{yield ha({code:this.code}),this.close(),new It().open()}catch(e){let t=new h;t.setTitle("Couldn't accept invite"),t.contentEl.append(jsx("p",null,"Unfortunately, something went wrong when accepting the invite.")),t.showError(e),this.close(),t.open()}})}},It=class extends P{constructor(){super(),this.setTitle("Accepted invite"),this.contentEl.append(jsx("p",null,"You have successfully accepted the invite!"),jsx("p",null,"You can now go into the Obsidian app, log in under Settings ","->",' Account, and enable the "Publish" core plugin to start collaborating on this site.'))}onClose(){super.onClose(),K(),location.reload()}},Ge=class extends k{constructor(e){super("publish","Publish"),this.page=e}getNavInfo(){return Rt}update(){let{publish:e}=this.page.subscriptions,{headerEl:t,titleEl:a,contentEl:o}=this,s={monthly:1e3,yearly:800,yearlyPromo:"20% lower price"};o.empty();let i=[a];if(e&&e.earlybird&&(i.push(jsx("span",{className:"flair"},"Early bird")),s.monthly/=2,s.yearly/=2),e&&e.expiry_ts>=Date.now()){let{renew:n,sites:u,renew_sites:l,expiry_ts:T}=e;i.push(jsx("span",{className:"flair"},"Active"));let p=B(T),c=u===1?"1 site":`${u} sites`,m=l===1?"1 site":`${l} sites`;if(g.get("order_success")==="publish"){let M=this.banner=new A;M.addContent(jsx("p",{class:""},"Your Publish plan is now active! To start publishing your notes, ",jsx("a",{href:"https://help.obsidian.md/Obsidian+Publish/Introduction+to+Obsidian+Publish",class:"text-accent font-medium",target:"_blank"},"follow our guide"),".")),M.addButton("Open Obsidian",()=>{window.location.assign("obsidian://publish-sites")}),o.append(M.containerEl)}else if(g.get("change_success")==="publish"){let M=this.banner=new A;M.addContentMessage("Your Publish plan has been successfully updated."),o.append(M.containerEl)}else o.append(jsx("p",{className:"mt-4 md:text-lg leading-tight md:mt-0"},"To publish files to your site, log in to your account in Obsidian and enable the ",jsx("b",null,"Publish")," plugin. ",jsx("a",{href:"https://help.obsidian.md/Obsidian+Publish/Set+up+Obsidian+Publish",target:"_blank",class:"text-accent font-medium"},"See\xA0user\xA0guide.")));let C=new F(o);C.addSetting(new y().setName("Your sites").setDesc(c).addButton("Change sites",()=>window.location.assign("/buy/publish")));let J=C.addSetting(new y().setName("Renewal frequency").setDesc(createFragment(M=>{n==="yearly"?M.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Yearly"),jsx("div",null,"You're saving 20% compared to monthly renewal."))):n==="monthly"?M.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Monthly"),jsx("div",null,"Save 20% by switching to yearly renewal."))):n===""&&M.append(jsx(jsxFragment,null,jsx("div",null,"Your plan will not be renewed.")))})));n!=="monthly"&&J.addButton(n?"Switch to monthly":"Renew monthly",()=>d(this,null,function*(){yield U({type:"publish",renew:"monthly"}),window.location.reload()})),n!=="yearly"&&J.addButton(n?"Switch to yearly":"Renew yearly",()=>d(this,null,function*(){yield U({type:"publish",renew:"yearly"}),window.location.reload()}));let te=C.addSetting(new y().setName("Auto-renewal").setDesc(n?`Your next renewal will be for ${m} on ${p}.`:`Your Publish subscription will expire on ${p}.`));n&&te.addButton("Stop",()=>{let M=createFragment(w=>{w.append(jsx(jsxFragment,null,jsx("p",null,"Are you sure you want to stop renewing your Obsidian Publish subscription?"),jsx("p",{class:"my-2"},"Your Obsidian Publish subscription will expire on ",p,". Your site will be deactivated on this date, and your data will be deleted from our servers 30 days later.")))});new ae("Stop renewing Obsidian Publish",M,"Stop auto-renewal",()=>d(this,null,function*(){yield U({type:"publish",renew:""}),window.location.reload()})).open()})}else{let n=Ba({yearly:s.yearly,yearlyDesc:"per month, per site, billed yearly",monthly:s.monthly,monthlyDesc:"per month, per site, billed monthly"});o.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{className:"mt-4 leading-tight max-w-xl md:text-lg md:mt-0"},"Web hosting for your Obsidian notes. Create an online wiki, knowledge base, documentation, or digital garden. Hassle-free refund within 7 days. ",jsx("a",{href:"/publish",target:"_blank",class:"text-accent font-medium"},"Learn\xA0more.")),jsx("div",{className:"mt-6"},n.el)),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button text-base md:text-sm button-md button-primary w-full",onclick:()=>window.location.assign("/buy/publish?renew="+n.getRenew())},"Buy Publish"))))}t.setChildrenInPlace(i)}}});var Nt,Na,he,Ht,Ve,Ye,qe=x(()=>{q();D();z();W();Y();H();Y();Nt={href:"/account/sync",display:"Sync",icon:ot},Na={basic_1:{name:"Sync Standard",code:"basic_1",upgradeShortDesc:"Upgrade your plan to increase the number of vaults and storage limits.",planElements:["1 vault","1 GB total storage","5 MB max file size","1 month history","Unlimited devices","Shared vaults"]},legacy:{name:"Sync Plus",code:"legacy",upgradeShortDesc:"Keep your subscription active to maintain your early supporter perks. You can also upgrade to access 100 GB of storage.",planElements:["10 vaults","50 GB total storage (early supporter)","200 MB max file size","12 months history","Unlimited devices","Shared vaults"]},standard_10:{name:"Sync Plus",code:"standard_10",upgradeShortDesc:"Upgrade your plan to increase total storage to 100 GB.",planElements:["10 vaults","10 GB total storage","200 MB max file size","12 months history","Unlimited devices","Shared vaults"]},standard_100:{name:"Sync Plus",code:"standard_100",planElements:["10 vaults","100 GB total storage","200 MB max file size","12 months history","Unlimited devices","Shared vaults"]}},he=class extends h{constructor(e,t,a,o){super(),this.code=e,this.setTitle("Obsidian Sync vault invite"),o?this.showError(o):(this.contentEl.append(jsx("p",null,t," (",a,") has invited you to collaborate on an Obsidian Sync vault together.")),this.buttonContainerEl.append(jsx(jsxFragment,null,jsx("button",{class:"button button-primary",onclick:this.acceptInvite.bind(this)},"Accept"),jsx("button",{onclick:this.close.bind(this)},"Cancel"))))}acceptInvite(){return d(this,null,function*(){try{yield ga({code:this.code}),this.close(),new Ht().open()}catch(e){let t=new h;t.setTitle("Couldn't accept invite"),t.contentEl.append(jsx("p",null,"Unfortunately, something went wrong when accepting the invite.")),t.showError(e),this.close(),t.open()}})}},Ht=class extends P{constructor(){super(),this.setTitle("Accepted invite"),this.contentEl.append(jsx("p",null,"You have successfully accepted the invite!"),jsx("p",null,"You can now go in to the Obsidian app, log in under Settings ","->",' Account, and enable the "Sync" core plugin to start collaborating on this vault.'))}onClose(){super.onClose(),K(),location.reload()}},Ve=class extends k{constructor(e){super("sync","Sync"),this.page=e}getNavInfo(){return Nt}update(){let{sync:e,syncPlans:t}=this.page.subscriptions,{headerEl:a,titleEl:o,contentEl:s}=this,i={};for(let p of t)i[p.code]=p;let n=(e==null?void 0:e.plan)||t[0].code,u=t.find(p=>p.code===n)||t[0];s.empty();let l=[o];if(e&&e.earlybird&&l.push(jsx("span",{className:"flair"},"Early bird")),e&&e.expiry_ts>=Date.now()){l.push(jsx("span",{className:"flair"},"Active"));let p=B(e.expiry_ts);if(g.get("order_success")==="sync"){let w=this.banner=new A;w.addContent(jsx("p",{class:""},"Your Sync plan is now active! Open Obsidian to start syncing your notes. Need help? ",jsx("a",{href:"https://help.obsidian.md/Obsidian+Sync/Set+up+Obsidian+Sync",class:"text-accent font-medium",target:"_blank"},"Follow our guide"),".")),w.addButton("Open Obsidian",()=>{window.location.assign("obsidian://sync-setup")}),s.append(w.containerEl)}else if(g.get("change_success")==="sync"){let w=this.banner=new A;w.addContentMessage("Your Sync plan has been successfully updated. Your new plan details may take up to 30 minutes to be applied."),s.append(w.containerEl)}else s.append(jsx("p",{className:"mt-4 md:text-lg max-w-xl leading-tight md:mt-0"},"To start syncing, log in to your account in Obsidian and enable the ",jsx("b",null,"Sync")," plugin. ",jsx("a",{href:"https://help.obsidian.md/Obsidian+Sync/Set+up+Obsidian+Sync",target:"_blank",className:"text-accent font-medium"},"See\xA0user\xA0guide.")));let c=new F(s),{renew:m}=e,C=n.startsWith("basic")?"Upgrade plan":"Change plan";c.addSetting(new y().setName("Plan").setDesc(createFragment(w=>{let j=Na[n];if(!j){w.append(jsx("div",null,"Unknown sync plan. Please contact support"));return}w.append(jsx("div",{class:"text-xl text-normal mb-1"},j.name)),j.upgradeShortDesc&&w.append(jsx("div",null,jsx("p",null,j.upgradeShortDesc))),w.append(jsx("div",{class:"mt-4 text-sm"},jsx("ul",{class:"list-disc pl-5 marker:text-muted text-normal"},j.planElements.map(Ua=>jsx("li",null,Ua)))))})).addButton(C,()=>window.location.assign("/buy/sync"))).containerEl.addClass("sm:items-start");let te=c.addSetting(new y().setName("Renewal frequency").setDesc(createFragment(w=>{m==="yearly"?w.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Yearly"),jsx("div",null,"You're saving 20% compared to monthly renewal."))):m==="monthly"?w.append(jsx(jsxFragment,null,jsx("div",{className:"text-xl text-normal mb-1"},"Monthly"),jsx("div",null,"Save 20% by switching to yearly renewal."))):m===""&&w.append(jsx(jsxFragment,null,jsx("div",null,"Your plan will not be renewed.")))})));m!=="monthly"&&te.addButton(m?"Switch to monthly":"Renew monthly",()=>d(this,null,function*(){yield U({type:"sync",renew:"monthly"}),window.location.reload()})),m!=="yearly"&&te.addButton(m?"Switch to yearly":"Renew yearly",()=>d(this,null,function*(){yield U({type:"sync",renew:"yearly"}),window.location.reload()}));let M=c.addSetting(new y().setName("Auto-renewal").setDesc(m?`Your next renewal will be on ${p}.`:`Your Sync subscription will expire on ${p}.`));m&&M.addButton("Stop",()=>{let w=createFragment(j=>{j.append(jsx(jsxFragment,null,jsx("p",null,"Are you sure you want to stop renewing your Obsidian Sync subscription?"),jsx("p",{class:"my-2"},"Your Obsidian Sync subscription will expire on ",p,". Your data will be deleted from our servers 30 days after your subscription expires."))),e.plan==="legacy"&&j.append(jsx("p",{class:"my-2 text-red-500"},"You are on a legacy plan with 50 GB storage. Once your subscription expires you will no longer be able to sign up for this plan."))});new ae("Stop renewing Obsidian Sync",w,"Stop auto-renewal",()=>d(this,null,function*(){yield U({type:"sync",renew:""}),window.location.reload()})).open()})}else{let p=!1,c=null,m=null,C=new Ye(i.standard_10||i.legacy,p);C.cardEl.addEventListener("click",()=>{C.setSelected(!0),m.setSelected(!1),u=C.plan}),m=new Ye(i.basic_1,p),m.cardEl.addEventListener("click",()=>{m.setSelected(!0),C.setSelected(!1),u=m.plan}),m.setSelected(!0),u=m.plan;let J=[m.cardEl,C.cardEl],te=()=>{p=!p,c.toggleClass("toggler-on",p),C.setPeriod(p),m&&m.setPeriod(p)},M=()=>{let w=new URLSearchParams({variation:u.code,renew:p?"monthly":"yearly"});window.location.assign("/buy/sync?"+w)};c=it(te),s.append(jsx("div",{class:"flex gap-6 flex-col md:flex-row"},jsx("div",null,jsx("div",{className:"mt-4 leading-tight max-w-xl md:text-lg md:mt-0"},"Sync your notes across devices with end-to-end encryption. Hassle-free refund within 7 days. ",jsx("a",{href:"/sync",target:"_blank",className:"text-accent font-medium"},"Learn\xA0more.")),jsx("div",{className:"mt-6"},c,jsx("div",{class:"mt-6 card-container mod-horizontal grid grid-cols-2 gap-x-4 lg:gap-x-6"},J))),jsx("div",{class:"md:ml-auto"},jsx("button",{class:"button text-base md:text-sm button-md button-primary w-full",onclick:M},"Buy Sync"))))}a.setChildrenInPlace(l)}},Ye=class{constructor(e,t){this.plan=e,this.monthly=t;let a=Na[e.code];this.priceEl=jsx("span",{className:"text-2xl font-semibold"},this.getPrice()),this.priceDescEl=jsx("div",{className:"text-muted text-xs sm:text-sm"},this.getPriceDesc()),this.cardEl=jsx("div",{class:"card cursor-pointer text-start p-4 rounded mb-3 ring-1 ring-gray-700 transition-100 transition-all hover:ring hover:ring-accent-500"},jsx("div",{class:"font-medium"},a.name),jsx("div",null,jsx("p",{className:"flex items-baseline gap-x-1"},this.priceEl,jsx("span",{className:"text-sm text-muted"},"USD")),this.priceDescEl),jsx("div",{class:"mt-4 text-xs md:text-sm md:text-base"},jsx("ul",{class:"list-disc pl-5 marker:text-muted"},a.planElements.map(o=>jsx("li",null,o)))))}setSelected(e){this.cardEl.toggleClass("is-selected",e)}setPeriod(e){this.monthly=e,this.priceDescEl.setText(this.getPriceDesc()),this.priceEl.setText(this.getPrice())}getPrice(){return"$"+S(this.monthly?this.plan.monthly:this.plan.yearly/12,!0)}getPriceDesc(){return this.monthly?"per month, billed monthly":"per month, billed yearly"}}});var Fa,_e,Oa=x(()=>{q();D();Ft();H();ue();W();qe();Pt();kt();Bt();ze();Pe();Fa='<svg alt="Obsidian" height="22" viewBox="0 0 143 25" width="126" xmlns="http://www.w3.org/2000/svg"><path fill="#A88BFA" d="m6.91927 14.5955c.64053-.1907 1.67255-.4839 2.85923-.5565-.71191-1.7968-.88376-3.3691-.74554-4.76905.15962-1.61678.72977-2.9662 1.28554-4.11442.1186-.24501.2326-.47313.3419-.69198.1549-.30984.3004-.60109.4365-.8953.2266-.48978.3948-.92231.4798-1.32416.0836-.39515.0841-.74806-.0148-1.08657-.099-.338982-.3093-.703864-.7093-1.1038132-.5222-.1353116-1.1017-.0165173-1.53613.3742922l-5.15591 4.638241c-.28758.25871-.47636.60929-.53406.99179l-.44455 2.94723c.69903.6179 2.42435 2.41414 3.47374 4.90644.09364.2224.1819.4505.26358.6838z"/><path fill="#A88BFA" d="m2.97347 10.3512c-.02431.1037-.05852.205-.10221.3024l-2.724986 6.0735c-.279882.6238-.15095061 1.3552.325357 1.8457l4.288349 4.4163c2.1899-3.2306 1.87062-6.2699.87032-8.6457-.75846-1.8013-1.90801-3.2112-2.65683-3.9922z"/><path fill="#A88BFA" d="m5.7507 23.5094c.07515.012.15135.0192.2281.0215.81383.0244 2.18251.0952 3.29249.2997.90551.1669 2.70051.6687 4.17761 1.1005 1.1271.3294 2.2886-.5707 2.4522-1.7336.1192-.8481.343-1.8075.7553-2.6869l-.0095.0033c-.6982-1.9471-1.5865-3.2044-2.5178-4.0073-.9284-.8004-1.928-1.1738-2.8932-1.3095-1.60474-.2257-3.07497.1961-4.00103.4682.55465 2.3107.38396 5.0295-1.48417 7.8441z"/><path fill="#A88BFA" d="m17.3708 19.3102c.9267-1.3985 1.5868-2.4862 1.9352-3.0758.1742-.295.1427-.6648-.0638-.9383-.5377-.7126-1.5666-2.1607-2.1272-3.5015-.5764-1.3785-.6624-3.51876-.6673-4.56119-.0019-.39626-.1275-.78328-.3726-1.09465l-3.3311-4.23183c-.0117.19075-.0392.37998-.0788.56747-.1109.52394-.32 1.04552-.5585 1.56101-.1398.30214-.3014.62583-.4646.95284-.1086.21764-.218.4368-.3222.652-.5385 1.11265-1.0397 2.32011-1.1797 3.73901-.1299 1.31514.0478 2.84484.8484 4.67094.1333.0113.2675.0262.4023.0452 1.1488.1615 2.3546.6115 3.4647 1.5685.9541.8226 1.8163 2.0012 2.5152 3.6463z"/><path fill="currentColor" d="m39.752 4.5038c-5.952 0-10.248 3.744-10.248 8.88s4.296 8.88 10.248 8.88c5.928 0 10.224-3.744 10.224-8.88s-4.296-8.88-10.224-8.88zm0 3.47999c3.576 0 6.144 2.13601 6.144 5.40001s-2.568 5.4-6.144 5.4c-3.6 0-6.168-2.136-6.168-5.4s2.568-5.40001 6.168-5.40001z"/><path fill="currentColor" d="m55.4847 20.5598c.864.936 2.472 1.704 4.584 1.704 4.32 0 6.8401-2.976 6.8401-6.576 0-3.624-2.5201-6.60001-6.8401-6.60001-2.112 0-3.72.79201-4.584 1.70401v-6.02401h-3.84v17.23201h3.84zm-.12-4.944c0-1.992 1.704-3.432 3.912-3.432 2.112 0 3.888 1.248 3.888 3.504s-1.776 3.48-3.888 3.48c-2.208 0-3.912-1.416-3.912-3.408z"/><path fill="currentColor" d="m67.3181 19.9118c1.464 1.488 4.272 2.352 7.2 2.352 3.96 0 6.936-1.44 6.936-4.392 0-2.88-2.832-3.432-6.072-3.816-2.736-.312-3.576-.384-3.576-1.08 0-.648.864-1.056 2.496-1.056 1.968 0 3.672.6 4.824 1.656l1.992-2.304c-1.272-1.224-3.648-2.18401-6.624-2.18401-4.008 0-6.48 1.72801-6.48 4.32001 0 2.712 2.52 3.312 5.544 3.696 2.832.336 4.032.336 4.032 1.176 0 .792-1.056 1.128-2.784 1.128-2.16 0-4.152-.672-5.664-2.064z"/><path fill="currentColor" d="m82.8395 8.05579h3.912v-3.288h-3.912zm3.864 1.29601h-3.84v12.648h3.84z"/><path fill="currentColor" d="m99.8264 20.5598v1.44h3.8396v-17.23201h-3.8396v6.02401c-.864-.912-2.472-1.70401-4.584-1.70401-4.32 0-6.84 2.97601-6.84 6.60001 0 3.6 2.52 6.576 6.84 6.576 2.112 0 3.72-.768 4.584-1.704zm.12-4.944v.144c0 1.992-1.704 3.408-3.912 3.408-2.112 0-3.888-1.224-3.888-3.48s1.776-3.504 3.888-3.504c2.208 0 3.912 1.44 3.912 3.432z"/><path fill="currentColor" d="m105.996 8.05579h3.912v-3.288h-3.912zm3.864 1.29601h-3.84v12.648h3.84z"/><path fill="currentColor" d="m116.863 22.2638c2.232 0 4.056-.648 5.208-1.656.648 1.2 2.184 1.92 4.992 1.392v-2.832c-1.344.288-1.632-.024-1.632-.696v-4.608c0-3.168-2.376-4.77601-6.408-4.77601-3.48 0-6.264 1.51201-7.056 3.79201l3.456.936c.384-.984 1.704-1.704 3.432-1.704 2.04 0 2.856.768 2.856 1.728v.072l-5.04.456c-2.976.288-5.16 1.512-5.16 3.984 0 2.496 2.232 3.912 5.352 3.912zm4.848-5.112c0 1.464-2.184 2.304-4.152 2.304-1.488 0-2.328-.432-2.328-1.248 0-.84.672-1.152 1.992-1.272l4.488-.456z"/><path fill="currentColor" d="m128.379 21.9998h3.84v-6.048c0-2.184 1.2-3.456 3.288-3.456 1.968 0 3 1.296 3 3.432v6.072h3.84v-7.2c0-3.504-2.232-5.71201-5.52-5.71201-2.04 0-3.624.76801-4.608 1.80001v-1.536h-3.84z"/></svg>',_e=class{constructor(e){this.scrollPosition=0;this.navEl=jsx("div",{class:"header-mobile-nav-menu fixed top-0 right-0 bottom-0 left-0 overflow-scroll overscroll-contain block md:hidden"},jsx("div",{class:"container"},this.linkListEl=jsx("ul",{class:"flex flex-col justify-between divide-y divide-gray-700"},jsx("li",{class:"mb-4 mt-4"},jsx("a",{href:"/account/profile",class:"block"},jsx("div",{class:"text-2xl font-semibold mb-1"},e.name),jsx("div",{class:"text-muted text-sm"},e.email))),this.logOutEl=jsx("li",null,jsx("a",{href:"#",class:"nav-item font-medium flex items-center gap-2 px-0.5 py-4 text-muted js-logout align-middle hover:text-red-400",onclick:this.logout},V(de)," Log\xA0out")),jsx("li",null,jsx("a",{href:"/",class:"nav-item font-medium flex items-center gap-2 px-0.5 py-4 text-muted align-middle"},V(le)," Back\xA0to\xA0main\xA0site"))))),this.togglerEl=jsx("div",{class:"ml-auto md:hidden z-10 text-gray-200 hover:text-gray-100"},this.togglerButtonEl=jsx("a",{class:"header-mobile-nav",href:"#","aria-label":"Open the navigation menu"},jsx("div",{class:"header-mobile-nav-button"},jsx("div",{class:"header-mobile-nav-button-inner"})))),this.togglerEl.addEventListener("click",t=>{t.preventDefault(),this.toggle()})}logout(){return d(this,null,function*(){yield ve(),window.location.assign("/auth")})}toggle(e){let{navEl:t,togglerButtonEl:a,scrollPosition:o}=this;e===!1||t.hasClass("active")?(t.removeClass("active"),a.removeClass("active"),document.body.removeClass("modal-open"),window.scrollTo(0,o)):(this.scrollPosition=window.pageYOffset||window.scrollY,t.addClass("active"),a.addClass("active"),location.pathname!=="/account"&&location.pathname!=="/account/"&&document.body.addClass("modal-open"))}addSection(e){let t=we(e);return this.linkListEl.insertBefore(jsx("li",null,t),this.logOutEl),t}}});function xe(r){let e=t=>"/account/"+t+location.search+location.hash;switch(r){case"sync":case"publish":case"catalyst":history.replaceState(null,null,e(r));break;case"business":history.replaceState(null,null,e("commercial"));break;case"credit":history.replaceState(null,null,e("billing"));break}}var We,Ot,$e,Ft=x(()=>{q();Pt();D();Bt();Pe();kt();ze();W();qe();ue();Oa();We=class{constructor(e){let t=jsx("ol",{role:"list",class:"flex breadcrumbs items-center space-x-1"});for(let a=0;a<e.length;a++){let o=e[a],s=o.href?jsx("a",{href:o.href,class:"font-medium text-normal hover:text-accent"},o.display):jsx("span",{class:"text-sm font-medium text-muted"},o.display);t.appendChild(jsx("li",null,jsx("div",{class:a!==0?"flex items-center space-x-1 text-sm":"flex items-center text-sm"},a!==0?V(et):jsx(jsxFragment,null),s)))}this.containerEl=jsx("nav",{class:"flex","aria-label":"Breadcrumb"},t)}},Ot=class{constructor(e){this.navElsByID={};this.sections=[];this.sectionsByID={};this.data=e,this.mobileNav=new _e(e),this.containerEl=jsx("div",{class:"welcome container md:min-h-screen flex flex-col md:flex-row"},jsx("div",{class:"grow md:border-r border-gray-800 md:pr-8"},jsx("header",{class:"flex items-center h-[--header-height] z-50 md:h-auto top-0 left-0 w-full bg-primary border-b border-gray-800 md:border-0 md:bg-transparent fixed md:sticky"},jsx("div",{class:"max-w-[90%] w-[70rem] mx-auto flex items-center justify-between md:flex-col md:items-start md:max-w-full md:w-full"},jsx("div",{class:"h-[--header-height] flex items-center"},jsx("a",{class:"header-logo mr-4 flex items-center gap-x-2 transition-colors -mt-[3px]",innerHTML:Fa,href:"/account"})),this.mobileNav.togglerEl,this.navEl=jsx("nav",{class:"nav w-full mb-6 relative font-medium text-lg hidden md:block space-y-1"}),jsx("div",{class:"hidden md:block font-medium text-lg ml-auto md:ml-0"},jsx("a",{href:"/",class:"hidden md:flex items-center gap-2 px-0.5 text-muted mb-1"},V(le)," Back\xA0to\xA0main\xA0site"),jsx("a",{href:"#",class:"flex items-center gap-2 px-0.5 text-muted js-logout align-middle hover:text-red-400",onclick:this.logout},V(de)," Log\xA0out")))),jsx("div",{class:"header-height"}),this.breadCrumbsEl=jsx("div",{class:"block mt-4 pb-2 empty:py-0 md:hidden"})),this.mobileNav.navEl,this.sectionsEl=jsx("div",{id:"sections",class:"flex flex-col basis-3/4"})),(location.pathname==="/account/"||location.pathname==="/account")&&(this.mobileNav.togglerEl.hide(),this.mobileNav.toggle(!0)),window.addEventListener("popstate",()=>{let t=this.getSectionFromPath();this.navigateToSection(!1,t)})}logout(){return d(this,null,function*(){yield ve(),window.location.assign("/auth")})}hideAllSections(){for(let e of this.sections)e.sectionEl.hide()}getSectionFromPath(){return location.pathname.replace(/^\/account\//,"")}navigateToSection(e,t){if(this.currentSectionID&&this.sectionsByID[this.currentSectionID].hideBanner(),t){this.currentSectionID=t;let a=this.sectionsByID[t];if(!a)return;t==="profile"&&a.sectionEl.removeClass("hidden","md:block"),this.hideAllSections(),a.sectionEl.show(),this.setBreadcrumb(a);for(let o in this.navElsByID)this.navElsByID[o].toggleClass("text-accent",o===t);this.mobileNav.togglerEl.show(),this.mobileNav.toggle(!1)}else{this.currentSectionID="profile";let a=this.sectionsByID.profile;a.sectionEl.addClass("hidden","md:block"),this.hideAllSections(),this.setBreadcrumb(),a.sectionEl.show();for(let o in this.navElsByID)this.navElsByID[o].toggleClass("text-accent",o==="profile");this.mobileNav.togglerEl.hide(),this.mobileNav.toggle(!0)}e&&history.pushState({},"",`${window.origin}/account/${t}${location.search}${location.hash}`)}setBreadcrumb(e){if(this.breadCrumbsEl.empty(),e){let t=[{display:"Account",href:"/account"},{display:e.getNavInfo().display}];this.breadCrumbsEl.appendChild(new We(t).containerEl)}}addSection(e){let t=e.sectionEl.id;this.sections.push(e),this.sectionsByID[t]=e;let a=e.getNavInfo(),o=this.mobileNav.addSection(a),s=we(a);this.navElsByID[t]=s,this.navEl.appendChild(s),this.sectionsEl.appendChild(e.sectionEl);let i=this.getSectionFromPath();return!i&&t==="profile"?(e.sectionEl.addClass("hidden","md:block"),s.addClass("text-accent")):i!==t?e.sectionEl.hide():i===t&&(this.setBreadcrumb(e),s.addClass("text-accent"),this.currentSectionID=t),s.addEventListener("click",n=>{n.preventDefault(),this.navigateToSection(!0,t)}),o.addEventListener("click",n=>{n.preventDefault(),this.navigateToSection(!0,t)}),e}},$e=class extends Ot{constructor(){super(...arguments);this.account=this.addSection(new Ne(this));this.billing=this.addSection(new Ue(this));this.commercial=this.addSection(new Fe(this));this.sync=this.addSection(new Ve(this));this.publish=this.addSection(new Ge(this));this.catalyst=this.addSection(new Se(this))}update(){for(let t of this.sections)t.update()}}});var ja=Va(je=>{D();Pe();pt();ht();z();Ft();ze();qe();Y();H();var ee=new URLSearchParams(location.hash.substring(1));(location.pathname==="/account"||location.pathname==="/account/")&&(g.has("order_success")?xe(g.get("order_success")):g.has("change_success")?xe(g.get("change_success")):g.has("publishcode")?xe("publish"):g.has("synccode")&&xe("sync"));var Ut=location.search;!Ut.includes("giftcode")&&!Ut.includes("publishcode")&&!Ut.includes("synccode")&&K();ready(()=>d(je,null,function*(){let r;try{r=yield $t()}catch(e){}if(r){let e=new $e(r);if(yield Promise.all([d(je,null,function*(){return e.gifts=yield pa()}),d(je,null,function*(){return e.subscriptions=yield Qt()})]),e.update(),fish("#main").appendChild(e.containerEl),g.has("code"))try{yield sa({code:g.get("code")}),new Ee().open()}catch(t){new Ce(t).open()}else if(g.has("giftcode")){let t=g.get("giftcode");try{let a=yield ca({code:t});new fe(t,a.amount,null).open()}catch(a){new fe(t,0,a).open()}}else if(g.has("publishcode")){let t=g.get("publishcode");try{let a=yield ma({code:t});new me(t,a.name,a.email,null).open()}catch(a){new me(t,"","",a).open()}}else if(g.has("synccode")){let t=g.get("synccode");try{let a=yield xa({code:t});new he(t,a.name,a.email,null).open()}catch(a){new he(t,"","",a).open()}}else if(g.has("error")){let t=new h;t.showError(g.get("error")),t.open()}}else{if(ee.has("forgotpass")||ee.has("forgetpw")){window.location.assign("/auth"+location.search+location.hash);return}window.location.replace("/auth?returnto="+encodeURIComponent(Yt()));return}if(ee.has("discount")&&(ee.get("discount")==="verified"?new Me().open():ee.get("discount")==="approved"&&ee.has("type")&&new Le(ee.get("type")).open()),g.has("action")){if(g.get("action")==="sync-setup"){setTimeout(()=>location.href="obsidian://sync-setup",0);let e=new P;e.setTitle("Invited to shared Obsidian Sync vault"),e.contentEl.append(jsx("p",null,"You've been invited to a shared Obsidian Sync vault!"),jsx("p",null,"If Obsidian didn't open automatically, you can view vaults shared with you by going to Settings \u2192 Sync \u2192 Remote vault \u2192 Manage/Choose.")),e.open()}else if(g.get("action")==="publish-sites"){setTimeout(()=>location.href="obsidian://publish-sites",0);let e=new P;e.setTitle("Invited to shared Obsidian Publish site"),e.contentEl.append(jsx("p",null,"You've been invited to a shared Obsidian Publish site!"),jsx("p",null,"If Obsidian didn't open automatically, you can view sites shared with you by going to Publish \u2192 Switch site.")),e.open()}}}))});ja();})();
/*! Bundled license information:

lucide/dist/esm/createElement.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/defaultAttributes.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/arrow-left.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/briefcase.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/chevron-right.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/coins.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/flame.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/power.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/refresh-cw.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/send.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/trash-2.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/user-round.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/lucide.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)
*/
