(()=>{var St=Object.defineProperty;var Ue=Object.getOwnPropertySymbols,Pt=Object.getPrototypeOf,Tt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,Lt=Reflect.get;var Ge=(s,e,t)=>e in s?St(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,G=(s,e)=>{for(var t in e||(e={}))Tt.call(e,t)&&Ge(s,t,e[t]);if(Ue)for(var t of Ue(e))Mt.call(e,t)&&Ge(s,t,e[t]);return s};var p=(s,e)=>()=>(s&&(e=s(s=0)),e);var At=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var pe=(s,e,t)=>Lt(Pt(s),t,e);var f=(s,e,t)=>new Promise((a,r)=>{var o=l=>{try{n(t.next(l))}catch(u){r(u)}},i=l=>{try{n(t.throw(l))}catch(u){r(u)}},n=l=>l.done?a(l.value):Promise.resolve(l.value).then(o,i);n((t=t.apply(s,e)).next())});var ze=p(()=>{});function Ve(s){let e=[],t=s.byteLength;for(let a=0;a<t;a++)e.push(String.fromCharCode(s[a]));return window.btoa(e.join(""))}function Ye(s,e){return f(this,null,function*(){let t;try{t=yield ajaxPromise({method:"POST",url:s,data:e})}catch(a){throw a.error?a.error:a}if(t=JSON.parse(t),t.code)throw t.code;if(t.error)throw t.error;return t})}function z(s){let e,t=!1;return()=>(t||(e=s(),t=!0),e)}function $(s){return new Promise((e,t)=>{let a=document.createElement("script");a.type="text/javascript",a.src=s,a.addEventListener("load",()=>e(a)),a.addEventListener("error",r=>t(r)),document.body.appendChild(a)})}function qe(){return location.pathname+location.search+location.hash}function v(s,e){let t=(s/100).toFixed(2).toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e&&t[1]==="00"?t[0]:t.join(".")}var fe,w=p(()=>{ze();fe={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"}});function R(s,e){return Ye(j+s,e||{})}function me(){return R("/user/signout")}function _e(){return R("/user/info")}function We(s,e=!1){return R("/subscription/price",G({include_tax:e},s))}function $e(){return R("/subscription/taxexemption/status")}function je(s){return R("/subscription/taxexemption/delete",s)}function Ke(s){return R("/subscription/taxexemption/upload",s)}function Ze(s){return R("/subscription/taxexemption/vat",s)}function Xe(){return R("/subscription/paypal/clientid")}var ce,j,qt,Bt,x=p(()=>{w();ce=location.host.startsWith("127.0.0.1")||location.host.startsWith("localhost"),j="https://api.obsidian.md";ce&&(j="http://127.0.0.1:3000");qt=j+"/subscription/stripe/finish",Bt=j+"/subscription/stripe/setup/finish"});var Je,he,Qe=p(()=>{Je=(s,e,t=[])=>{let a=document.createElementNS("http://www.w3.org/2000/svg",s);return Object.keys(e).forEach(r=>{a.setAttribute(r,String(e[r]))}),t.length&&t.forEach(r=>{let o=Je(...r);a.appendChild(o)}),a},he=([s,e,t])=>Je(s,e,t)});var m,E=p(()=>{m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}});var K,et=p(()=>{E();K=["svg",m,[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]]]});var xe,tt=p(()=>{E();xe=["svg",m,[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}]]]});var ge,at=p(()=>{E();ge=["svg",m,[["path",{d:"m9 18 6-6-6-6"}]]]});var be,rt=p(()=>{E();be=["svg",m,[["circle",{cx:"8",cy:"8",r:"6"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}],["path",{d:"M7 6h1v4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82"}]]]});var ye,ot=p(()=>{E();ye=["svg",m,[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"}]]]});var ve,st=p(()=>{E();ve=["svg",m,[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]]]});var Z,nt=p(()=>{E();Z=["svg",m,[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]]]});var we,it=p(()=>{E();we=["svg",m,[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]]]});var Ee,lt=p(()=>{E();Ee=["svg",m,[["path",{d:"m22 2-7 20-4-9-9-4Z"}],["path",{d:"M22 2 11 13"}]]]});var Ce,dt=p(()=>{E();Ce=["svg",m,[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]]]});var Se,ut=p(()=>{E();Se=["svg",m,[["circle",{cx:"12",cy:"8",r:"5"}],["path",{d:"M20 21a8 8 0 0 0-16 0"}]]]});var P=p(()=>{Qe();et();tt();at();rt();ot();st();nt();it();lt();dt();ut();});var F,C,H,T=p(()=>{F=class{constructor(){this.containerEl=createDiv("modal-container");let e=this.bgEl=this.containerEl.createDiv("modal-bg"),t=this.modalEl=this.containerEl.createDiv("modal"),a=t.createDiv("modal-close-button");this.titleEl=t.createDiv("modal-title"),this.contentEl=t.createDiv("modal-content"),this.buttonContainerEl=t.createDiv("modal-button-container"),a.addEventListener("click",this.close.bind(this)),e.addEventListener("click",this.close.bind(this))}setTitle(e){return this.titleEl.setText(e),this}addCloseButton(){this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Close"}).addEventListener("click",this.close.bind(this))}open(){document.body.appendChild(this.containerEl),document.body.addClass("modal-open"),this.onOpen()}close(){this.onClose(),document.body.removeClass("modal-open"),this.containerEl.detach()}onOpen(){}onClose(){}},C=class extends F{constructor(){super();let e=this.contentEl.createDiv("message-container");this.errorEl=e.createDiv("pb-4 payment-error message mod-error text-red-400"),this.hideError()}showError(e){let{errorEl:t}=this;e instanceof XMLHttpRequest&&(e=e.statusText),t.setText(e.toString()),t.show()}hideError(){let{errorEl:e}=this;e.hide(),e.empty(),e.setText("")}},H=class extends F{constructor(e,t){super(),this.setTitle(e),this.messageContainerEl=this.contentEl.createDiv("message-container"),this.messageContainerEl.createDiv({cls:"message mod-success",text:t}),this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Got it"}).addEventListener("click",()=>{this.close(),window.location.reload()})}}});function M(s){let e=he(s);return e.addClass("inline","icon"),e}var V=p(()=>{P()});function Pe(s){return jsx("a",{href:s.href,class:"nav-item font-medium flex items-center gap-2 relative py-3 md:p-0"},M(s.icon)," ",s.display)}var B=p(()=>{V()});var Y,L=p(()=>{w();Y=new URLSearchParams(location.search.substring(1))});function g(s,e,t){if(e<0||e>31||s>>>e)throw new RangeError("Value out of range");for(let a=e-1;a>=0;a--)t.push(s>>>a&1)}function k(s,e){return(s>>>e&1)!=0}function y(s){if(!s)throw new Error("Assertion error")}var d,pt,h,q,A,U,S,O,ft=p(()=>{d=class d{constructor(e,t,a,r){this.version=e;this.errorCorrectionLevel=t;this.modules=[];this.isFunction=[];if(e<d.MIN_VERSION||e>d.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=e*4+17;let o=[];for(let n=0;n<this.size;n++)o.push(!1);for(let n=0;n<this.size;n++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();let i=this.addEccAndInterleave(a);if(this.drawCodewords(i),r==-1){let n=1e9;for(let l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);let u=this.getPenaltyScore();u<n&&(r=l,n=u),this.applyMask(l)}}y(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(e,t){let a=q.makeSegments(e);return d.encodeSegments(a,t)}static encodeBinary(e,t){let a=q.makeBytes(e);return d.encodeSegments([a],t)}static encodeSegments(e,t,a=1,r=40,o=-1,i=!0){if(!(d.MIN_VERSION<=a&&a<=r&&r<=d.MAX_VERSION)||o<-1||o>7)throw new RangeError("Invalid value");let n,l;for(n=a;;n++){let c=d.getNumDataCodewords(n,t)*8,b=q.getTotalBits(e,n);if(b<=c){l=b;break}if(n>=r)throw new RangeError("Data too long")}for(let c of[U.MEDIUM,U.QUARTILE,U.HIGH])i&&l<=d.getNumDataCodewords(n,c)*8&&(t=c);let u=[];for(let c of e){g(c.mode.modeBits,4,u),g(c.numChars,c.mode.numCharCountBits(n),u);for(let b of c.getData())u.push(b)}y(u.length==l);let D=d.getNumDataCodewords(n,t)*8;y(u.length<=D),g(0,Math.min(4,D-u.length),u),g(0,(8-u.length%8)%8,u),y(u.length%8==0);for(let c=236;u.length<D;c^=253)g(c,8,u);let I=[];for(;I.length*8<u.length;)I.push(0);return u.forEach((c,b)=>I[b>>>3]|=c<<7-(b&7)),new d(n,t,I,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let a=0;a<t;a++)for(let r=0;r<t;r++)a==0&&r==0||a==0&&r==t-1||a==t-1&&r==0||this.drawAlignmentPattern(e[a],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,a=t;for(let o=0;o<10;o++)a=a<<1^(a>>>9)*1335;let r=(t<<10|a)^21522;y(r>>>15==0);for(let o=0;o<=5;o++)this.setFunctionModule(8,o,k(r,o));this.setFunctionModule(8,7,k(r,6)),this.setFunctionModule(8,8,k(r,7)),this.setFunctionModule(7,8,k(r,8));for(let o=9;o<15;o++)this.setFunctionModule(14-o,8,k(r,o));for(let o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,k(r,o));for(let o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,k(r,o));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let a=0;a<12;a++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;y(t>>>18==0);for(let a=0;a<18;a++){let r=k(t,a),o=this.size-11+a%3,i=Math.floor(a/3);this.setFunctionModule(o,i,r),this.setFunctionModule(i,o,r)}}drawFinderPattern(e,t){for(let a=-4;a<=4;a++)for(let r=-4;r<=4;r++){let o=Math.max(Math.abs(r),Math.abs(a)),i=e+r,n=t+a;0<=i&&i<this.size&&0<=n&&n<this.size&&this.setFunctionModule(i,n,o!=2&&o!=4)}}drawAlignmentPattern(e,t){for(let a=-2;a<=2;a++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+a,Math.max(Math.abs(r),Math.abs(a))!=1)}setFunctionModule(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0}addEccAndInterleave(e){let t=this.version,a=this.errorCorrectionLevel;if(e.length!=d.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");let r=d.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],o=d.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],i=Math.floor(d.getNumRawDataModules(t)/8),n=r-i%r,l=Math.floor(i/r),u=[],D=d.reedSolomonComputeDivisor(o);for(let c=0,b=0;c<r;c++){let N=e.slice(b,b+l-o+(c<n?0:1));b+=N.length;let Ct=d.reedSolomonComputeRemainder(N,D);c<n&&N.push(0),u.push(N.concat(Ct))}let I=[];for(let c=0;c<u[0].length;c++)u.forEach((b,N)=>{(c!=l-o||N>=n)&&I.push(b[c])});return y(I.length==i),I}drawCodewords(e){if(e.length!=Math.floor(d.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let t=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let r=0;r<this.size;r++)for(let o=0;o<2;o++){let i=a-o,l=(a+1&2)==0?this.size-1-r:r;!this.isFunction[l][i]&&t<e.length*8&&(this.modules[l][i]=k(e[t>>>3],7-(t&7)),t++)}}y(t==e.length*8)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let r;switch(e){case 0:r=(a+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=a%3==0;break;case 3:r=(a+t)%3==0;break;case 4:r=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:r=a*t%2+a*t%3==0;break;case 6:r=(a*t%2+a*t%3)%2==0;break;case 7:r=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&r&&(this.modules[t][a]=!this.modules[t][a])}}getPenaltyScore(){let e=0;for(let o=0;o<this.size;o++){let i=!1,n=0,l=[0,0,0,0,0,0,0];for(let u=0;u<this.size;u++)this.modules[o][u]==i?(n++,n==5?e+=d.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,l),i||(e+=this.finderPenaltyCountPatterns(l)*d.PENALTY_N3),i=this.modules[o][u],n=1);e+=this.finderPenaltyTerminateAndCount(i,n,l)*d.PENALTY_N3}for(let o=0;o<this.size;o++){let i=!1,n=0,l=[0,0,0,0,0,0,0];for(let u=0;u<this.size;u++)this.modules[u][o]==i?(n++,n==5?e+=d.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,l),i||(e+=this.finderPenaltyCountPatterns(l)*d.PENALTY_N3),i=this.modules[u][o],n=1);e+=this.finderPenaltyTerminateAndCount(i,n,l)*d.PENALTY_N3}for(let o=0;o<this.size-1;o++)for(let i=0;i<this.size-1;i++){let n=this.modules[o][i];n==this.modules[o][i+1]&&n==this.modules[o+1][i]&&n==this.modules[o+1][i+1]&&(e+=d.PENALTY_N2)}let t=0;for(let o of this.modules)t=o.reduce((i,n)=>i+(n?1:0),t);let a=this.size*this.size,r=Math.ceil(Math.abs(t*20-a*10)/a)-1;return y(0<=r&&r<=9),e+=r*d.PENALTY_N4,y(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(this.version==1)return[];{let e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,a=[6];for(let r=this.size-7;a.length<e;r-=t)a.splice(1,0,r);return a}}static getNumRawDataModules(e){if(e<d.MIN_VERSION||e>d.MAX_VERSION)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){let a=Math.floor(e/7)+2;t-=(25*a-10)*a-55,e>=7&&(t-=36)}return y(208<=t&&t<=29648),t}static getNumDataCodewords(e,t){return Math.floor(d.getNumRawDataModules(e)/8)-d.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*d.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let a=1;for(let r=0;r<e;r++){for(let o=0;o<t.length;o++)t[o]=d.reedSolomonMultiply(t[o],a),o+1<t.length&&(t[o]^=t[o+1]);a=d.reedSolomonMultiply(a,2)}return t}static reedSolomonComputeRemainder(e,t){let a=t.map(r=>0);for(let r of e){let o=r^a.shift();a.push(0),t.forEach((i,n)=>a[n]^=d.reedSolomonMultiply(i,o))}return a}static reedSolomonMultiply(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let a=0;for(let r=7;r>=0;r--)a=a<<1^(a>>>7)*285,a^=(t>>>r&1)*e;return y(a>>>8==0),a}finderPenaltyCountPatterns(e){let t=e[1];y(t<=this.size*3);let a=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(a&&e[0]>=t*4&&e[6]>=t?1:0)+(a&&e[6]>=t*4&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)}};d.MIN_VERSION=1,d.MAX_VERSION=40,d.PENALTY_N1=3,d.PENALTY_N2=3,d.PENALTY_N3=40,d.PENALTY_N4=10,d.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],d.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];pt=d;h=class h{constructor(e,t,a){this.mode=e;this.numChars=t;this.bitData=a;if(t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(e){let t=[];for(let a of e)g(a,8,t);return new h(O.BYTE,e.length,t)}static makeNumeric(e){if(!h.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let a=0;a<e.length;){let r=Math.min(e.length-a,3);g(parseInt(e.substring(a,a+r),10),r*3+1,t),a+=r}return new h(O.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!h.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t=[],a;for(a=0;a+2<=e.length;a+=2){let r=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a))*45;r+=h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a+1)),g(r,11,t)}return a<e.length&&g(h.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a)),6,t),new h(O.ALPHANUMERIC,e.length,t)}static makeSegments(e){return e==""?[]:h.isNumeric(e)?[h.makeNumeric(e)]:h.isAlphanumeric(e)?[h.makeAlphanumeric(e)]:[h.makeBytes(h.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)g(e,8,t);else if(e<16384)g(2,2,t),g(e,14,t);else if(e<1e6)g(6,3,t),g(e,21,t);else throw new RangeError("ECI assignment value out of range");return new h(O.ECI,0,t)}static isNumeric(e){return h.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return h.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let a=0;for(let r of e){let o=r.mode.numCharCountBits(t);if(r.numChars>=1<<o)return 1/0;a+=4+o+r.bitData.length}return a}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let a=0;a<e.length;a++)e.charAt(a)!="%"?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";q=h,A=class A{constructor(e,t){this.ordinal=e;this.formatBits=t}};A.LOW=new A(0,1),A.MEDIUM=new A(1,0),A.QUARTILE=new A(2,3),A.HIGH=new A(3,2);U=A,S=class S{constructor(e,t){this.modeBits=e;this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};S.NUMERIC=new S(1,[10,12,14]),S.ALPHANUMERIC=new S(2,[9,11,13]),S.BYTE=new S(4,[8,16,16]),S.KANJI=new S(8,[8,10,12]),S.ECI=new S(7,[0,0,0]);O=S});var ct,Te=p(()=>{P();x();T();B();L();ft();ct={href:"/account/profile",display:"Profile",icon:Se}});var Me=p(()=>{x();T();w()});var te,Le=p(()=>{P();x();Me();B();w();L();te={href:"/account/commercial",display:"License",icon:xe}});var ae,Ae=p(()=>{P();x();T();B();L();ae={href:"/account/catalyst",display:"Catalyst",icon:ye}});var ht=p(()=>{x();T()});var Dt,xt,Yr,qr,_r,ke=p(()=>{x();T();w();Dt=ce?"pk_test_y7CBP7qLG6kSU9sdcHV5S2db0052OC4wR8":"pk_live_vqeOYADfYPpqKDT5FtAqCNBP00a9WEhYa6",xt=z(()=>f(void 0,null,function*(){yield Promise.all([$("https://js.braintreegateway.com/web/3.85.2/js/client.min.js"),$("https://js.braintreegateway.com/web/3.85.2/js/data-collector.min.js"),$("https://js.braintreegateway.com/web/3.85.2/js/paypal-checkout.min.js")]);let s=yield Xe(),e=window.braintree,t=yield e.client.create({authorization:s.clientid});return{braintree:e,braintreeClient:t}})),Yr=z(()=>f(void 0,null,function*(){let{braintree:s,braintreeClient:e}=yield xt(),t=yield s.paypalCheckout.create({client:e});yield t.loadPayPalSDK({vault:!0,currency:"CAD",intent:"capture"});let a=window.paypal;return{paypalCheckout:t,paypal:a}})),qr=z(()=>f(void 0,null,function*(){let{braintree:s,braintreeClient:e}=yield xt();return yield s.dataCollector.create({client:e})})),_r=z(()=>window.Stripe(Dt))});var bt=p(()=>{x();T();ke();L();w()});var oe,re,De=p(()=>{P();x();ht();bt();Me();B();w();ke();L();T();V();oe={href:"/account/billing",display:"Billing",icon:be},re=class s extends C{constructor(){super(),this.setTitle("Sales tax")}onOpen(){return f(this,null,function*(){pe(s.prototype,this,"onOpen").call(this),this.contentEl.addClass("relative"),this.setLoading(!0);let e=this.errorEl.parentElement,t,a,r,o;try{let i=yield $e();t=i.certs,a=i.country,r=i.vat_number,o=i.postal_code}catch(i){this.showError(i)}if(this.contentEl.insertBefore(jsx("div",{class:"mb-4"},jsx("p",{class:"mb-2"},"Obsidian is required to collect taxes in certain jurisdictions. We use your location to determine the taxes that should be applied. ",jsx("a",{class:"underline text-accent cursor-pointer",href:"https://help.obsidian.md/sales-tax",target:"_blank"},"Learn\xA0more"),".")),e),t&&t.length>0){let i;this.contentEl.insertBefore(jsx("div",null,jsx("p",{class:"border-b border-gray-700 pb-2 font-semibold"},"Your exemption certificates"),jsx("div",{class:"mx-8 py-4"},jsx("table",{class:"table-auto min-w-full"},jsx("thead",{class:"border-b border-gray-700"},jsx("tr",null,jsx("td",null,"State"),jsx("td",null,"Created"),jsx("td",null,"Remove"))),i=jsx("tbody",null)))),e);for(let n of t)i.appendChild(jsx("tr",null,jsx("td",null,n.juris.substring(3)),jsx("td",null,new Date(n.created_ts).toLocaleDateString()),jsx("td",null,jsx("a",{href:"#",class:"text-muted hover:text-red-400",onclick:()=>{this.deleteCertificate(n.id)}},M(Ce)))))}this.contentEl.insertBefore(jsx(jsxFragment,null,jsx("div",null,jsx("p",{class:"border-b border-gray-700 pb-2 font-semibold"},"Location"),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"Country"),this.countryDropdownEl=jsx("select",null)),this.caMsgEl=jsx("p",{class:"mt-4"},"Tax exemptions are not available in Canada.")),this.fileUploadSectionEl=jsx("div",{class:"mt-8 mb-4"},jsx("p",{class:"border-b border-gray-700  pb-2 font-semibold"},"Tax exemption certificate"),jsx("p",{class:"text-muted text-sm py-2"},"Upload an image or PDF containing your tax exemption certificate. Maximum 3MB file size."),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"Zip code"),this.postalCodeEl=jsx("input",{type:"text",value:o,placeholder:"Your zip code"})),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"Certificate file"),this.fileUploadInputEl=jsx("input",{type:"file",accept:"image/*,.pdf",id:"input"}))),this.vatSectionEl=jsx("div",{class:"mt-8 mb-4"},jsx("p",{class:"border-b border-gray-700  pb-2 font-semibold"},"VAT number"),jsx("p",{class:"text-muted text-sm py-2"},"Depending on your location, you may add your Tax Identification Number (TIN), VAT Number, or VAT ID. The format depends on your country."),jsx("div",{class:"gap-2 flex items-center w-full py-4 pb-0"},jsx("span",{class:"grow text-sm"},"VAT number"),this.vatNumberEl=jsx("input",{type:"text",value:r,placeholder:"VAT number"})))),e);for(let i in fe){let n=fe[i];this.countryDropdownEl.createEl("option",{value:i,text:n})}this.countryDropdownEl.value=a||"US",this.countryDropdownEl.addEventListener("change",this.updateDisplayedFields.bind(this)),this.uploadBtn=this.buttonContainerEl.createEl("button",{cls:"button button-primary",text:"Upload"}),this.uploadBtn.addEventListener("click",this.upload.bind(this)),this.buttonContainerEl.createEl("button",{cls:"button ml-2",text:"Cancel"}).addEventListener("click",this.close.bind(this)),this.updateDisplayedFields(),this.setLoading(!1)})}deleteCertificate(e){return f(this,null,function*(){try{yield je({certificate_id:e}),this.close(),new H("Successfully deleted","Your exemption certificate has been deleted.").open()}catch(t){console.error(t),this.showError("Failed to delete certificate. Please try again.")}})}updateDisplayedFields(){let{caMsgEl:e,fileUploadSectionEl:t,postalCodeEl:a,uploadBtn:r,vatSectionEl:o}=this;switch(this.countryDropdownEl.value){case"":case"US":e.hide(),o.hide(),a.parentElement.show(),t.show(),r.disabled=!1,r.removeClass("mod-disabled"),r.setText("Upload");break;case"CA":e.show(),o.hide(),a.parentElement.hide(),t.hide(),r.disabled=!0,r.addClass("mod-disabled"),r.setText("Save");break;default:e.hide(),o.show(),a.parentElement.hide(),t.hide(),r.disabled=!1,r.removeClass("mod-disabled"),r.setText("Save");break}}upload(){return f(this,null,function*(){let{countryDropdownEl:e,postalCodeEl:t,uploadBtn:a,vatNumberEl:r}=this;if(this.hideError(),e.removeClass("input-error"),t.removeClass("input-error"),r.removeClass("input-error"),!e.value){this.showError("Please select your country"),e.addClass("input-error");return}if(e.value==="CA"){this.showError("Tax exemptions are not available in Canada.");return}a.disabled=!0,a.addClass("mod-disabled");try{e.value==="US"?yield this.uploadCertificate():yield this.updateVAT()}finally{a.disabled=!1,a.removeClass("mod-disabled")}})}uploadCertificate(){return f(this,null,function*(){let{fileUploadInputEl:e,postalCodeEl:t}=this;if(!t.value){this.showError("Please enter your postal code"),t.addClass("input-error");return}let a=e.files;if(a.length===0){this.showError("Please select a file to upload.");return}else if(a.length>1){this.showError("Please select a single file to upload.");return}let r=yield a.item(0).arrayBuffer(),o=Ve(new Uint8Array(r)),i={postal_code:t.value,certificate:o,certificate_name:a.item(0).name},n=JSON.stringify(i),l=new TextEncoder().encode(n).length;if(l>4.75*1024*1024){console.log(l/1024/1024),this.showError("Exceeded maximum attachment size.");return}try{yield Ke(i),this.close(),new H("Successfully uploaded","Your tax exemption certificate has been received.").open()}catch(u){this.showError(u)}})}updateVAT(){return f(this,null,function*(){let{vatNumberEl:e}=this;if(!e.value){this.showError("Please enter your VAT number"),e.addClass("input-error");return}try{yield Ze({vat_number:e.value}),this.close(),new H("Successfully saved","Your VAT number has been received.").open()}catch(t){this.showError(t)}})}setLoading(e){this.contentEl.toggleClass("loading",e)}}});var se,Ie=p(()=>{P();x();T();B();L();w();L();se={href:"/account/publish",display:"Publish",icon:Ee}});var ne,Re=p(()=>{P();x();T();B();L();w();L();ne={href:"/account/sync",display:"Sync",icon:we}});var He,ie,le,de,ue,Ne=p(()=>{P();x();Fe();w();V();B();Re();Te();De();Le();Ie();Ae();He='<svg alt="Obsidian" height="22" viewBox="0 0 143 25" width="126" xmlns="http://www.w3.org/2000/svg"><path fill="#A88BFA" d="m6.91927 14.5955c.64053-.1907 1.67255-.4839 2.85923-.5565-.71191-1.7968-.88376-3.3691-.74554-4.76905.15962-1.61678.72977-2.9662 1.28554-4.11442.1186-.24501.2326-.47313.3419-.69198.1549-.30984.3004-.60109.4365-.8953.2266-.48978.3948-.92231.4798-1.32416.0836-.39515.0841-.74806-.0148-1.08657-.099-.338982-.3093-.703864-.7093-1.1038132-.5222-.1353116-1.1017-.0165173-1.53613.3742922l-5.15591 4.638241c-.28758.25871-.47636.60929-.53406.99179l-.44455 2.94723c.69903.6179 2.42435 2.41414 3.47374 4.90644.09364.2224.1819.4505.26358.6838z"/><path fill="#A88BFA" d="m2.97347 10.3512c-.02431.1037-.05852.205-.10221.3024l-2.724986 6.0735c-.279882.6238-.15095061 1.3552.325357 1.8457l4.288349 4.4163c2.1899-3.2306 1.87062-6.2699.87032-8.6457-.75846-1.8013-1.90801-3.2112-2.65683-3.9922z"/><path fill="#A88BFA" d="m5.7507 23.5094c.07515.012.15135.0192.2281.0215.81383.0244 2.18251.0952 3.29249.2997.90551.1669 2.70051.6687 4.17761 1.1005 1.1271.3294 2.2886-.5707 2.4522-1.7336.1192-.8481.343-1.8075.7553-2.6869l-.0095.0033c-.6982-1.9471-1.5865-3.2044-2.5178-4.0073-.9284-.8004-1.928-1.1738-2.8932-1.3095-1.60474-.2257-3.07497.1961-4.00103.4682.55465 2.3107.38396 5.0295-1.48417 7.8441z"/><path fill="#A88BFA" d="m17.3708 19.3102c.9267-1.3985 1.5868-2.4862 1.9352-3.0758.1742-.295.1427-.6648-.0638-.9383-.5377-.7126-1.5666-2.1607-2.1272-3.5015-.5764-1.3785-.6624-3.51876-.6673-4.56119-.0019-.39626-.1275-.78328-.3726-1.09465l-3.3311-4.23183c-.0117.19075-.0392.37998-.0788.56747-.1109.52394-.32 1.04552-.5585 1.56101-.1398.30214-.3014.62583-.4646.95284-.1086.21764-.218.4368-.3222.652-.5385 1.11265-1.0397 2.32011-1.1797 3.73901-.1299 1.31514.0478 2.84484.8484 4.67094.1333.0113.2675.0262.4023.0452 1.1488.1615 2.3546.6115 3.4647 1.5685.9541.8226 1.8163 2.0012 2.5152 3.6463z"/><path fill="currentColor" d="m39.752 4.5038c-5.952 0-10.248 3.744-10.248 8.88s4.296 8.88 10.248 8.88c5.928 0 10.224-3.744 10.224-8.88s-4.296-8.88-10.224-8.88zm0 3.47999c3.576 0 6.144 2.13601 6.144 5.40001s-2.568 5.4-6.144 5.4c-3.6 0-6.168-2.136-6.168-5.4s2.568-5.40001 6.168-5.40001z"/><path fill="currentColor" d="m55.4847 20.5598c.864.936 2.472 1.704 4.584 1.704 4.32 0 6.8401-2.976 6.8401-6.576 0-3.624-2.5201-6.60001-6.8401-6.60001-2.112 0-3.72.79201-4.584 1.70401v-6.02401h-3.84v17.23201h3.84zm-.12-4.944c0-1.992 1.704-3.432 3.912-3.432 2.112 0 3.888 1.248 3.888 3.504s-1.776 3.48-3.888 3.48c-2.208 0-3.912-1.416-3.912-3.408z"/><path fill="currentColor" d="m67.3181 19.9118c1.464 1.488 4.272 2.352 7.2 2.352 3.96 0 6.936-1.44 6.936-4.392 0-2.88-2.832-3.432-6.072-3.816-2.736-.312-3.576-.384-3.576-1.08 0-.648.864-1.056 2.496-1.056 1.968 0 3.672.6 4.824 1.656l1.992-2.304c-1.272-1.224-3.648-2.18401-6.624-2.18401-4.008 0-6.48 1.72801-6.48 4.32001 0 2.712 2.52 3.312 5.544 3.696 2.832.336 4.032.336 4.032 1.176 0 .792-1.056 1.128-2.784 1.128-2.16 0-4.152-.672-5.664-2.064z"/><path fill="currentColor" d="m82.8395 8.05579h3.912v-3.288h-3.912zm3.864 1.29601h-3.84v12.648h3.84z"/><path fill="currentColor" d="m99.8264 20.5598v1.44h3.8396v-17.23201h-3.8396v6.02401c-.864-.912-2.472-1.70401-4.584-1.70401-4.32 0-6.84 2.97601-6.84 6.60001 0 3.6 2.52 6.576 6.84 6.576 2.112 0 3.72-.768 4.584-1.704zm.12-4.944v.144c0 1.992-1.704 3.408-3.912 3.408-2.112 0-3.888-1.224-3.888-3.48s1.776-3.504 3.888-3.504c2.208 0 3.912 1.44 3.912 3.432z"/><path fill="currentColor" d="m105.996 8.05579h3.912v-3.288h-3.912zm3.864 1.29601h-3.84v12.648h3.84z"/><path fill="currentColor" d="m116.863 22.2638c2.232 0 4.056-.648 5.208-1.656.648 1.2 2.184 1.92 4.992 1.392v-2.832c-1.344.288-1.632-.024-1.632-.696v-4.608c0-3.168-2.376-4.77601-6.408-4.77601-3.48 0-6.264 1.51201-7.056 3.79201l3.456.936c.384-.984 1.704-1.704 3.432-1.704 2.04 0 2.856.768 2.856 1.728v.072l-5.04.456c-2.976.288-5.16 1.512-5.16 3.984 0 2.496 2.232 3.912 5.352 3.912zm4.848-5.112c0 1.464-2.184 2.304-4.152 2.304-1.488 0-2.328-.432-2.328-1.248 0-.84.672-1.152 1.992-1.272l4.488-.456z"/><path fill="currentColor" d="m128.379 21.9998h3.84v-6.048c0-2.184 1.2-3.456 3.288-3.456 1.968 0 3 1.296 3 3.432v6.072h3.84v-7.2c0-3.504-2.232-5.71201-5.52-5.71201-2.04 0-3.624.76801-4.608 1.80001v-1.536h-3.84z"/></svg>',ie=class{constructor(e){this.scrollPosition=0;this.navEl=jsx("div",{class:"header-mobile-nav-menu fixed top-0 right-0 bottom-0 left-0 overflow-scroll overscroll-contain block md:hidden"},jsx("div",{class:"container"},this.linkListEl=jsx("ul",{class:"flex flex-col justify-between divide-y divide-gray-700"},jsx("li",{class:"mb-4 mt-4"},jsx("a",{href:"/account/profile",class:"block"},jsx("div",{class:"text-2xl font-semibold mb-1"},e.name),jsx("div",{class:"text-muted text-sm"},e.email))),this.logOutEl=jsx("li",null,jsx("a",{href:"#",class:"nav-item font-medium flex items-center gap-2 px-0.5 py-4 text-muted js-logout align-middle hover:text-red-400",onclick:this.logout},M(Z)," Log\xA0out")),jsx("li",null,jsx("a",{href:"/",class:"nav-item font-medium flex items-center gap-2 px-0.5 py-4 text-muted align-middle"},M(K)," Back\xA0to\xA0main\xA0site"))))),this.togglerEl=jsx("div",{class:"ml-auto md:hidden z-10 text-gray-200 hover:text-gray-100"},this.togglerButtonEl=jsx("a",{class:"header-mobile-nav",href:"#","aria-label":"Open the navigation menu"},jsx("div",{class:"header-mobile-nav-button"},jsx("div",{class:"header-mobile-nav-button-inner"})))),this.togglerEl.addEventListener("click",t=>{t.preventDefault(),this.toggle()})}logout(){return f(this,null,function*(){yield me(),window.location.assign("/auth")})}toggle(e){let{navEl:t,togglerButtonEl:a,scrollPosition:r}=this;e===!1||t.hasClass("active")?(t.removeClass("active"),a.removeClass("active"),document.body.removeClass("modal-open"),window.scrollTo(0,r)):(this.scrollPosition=window.pageYOffset||window.scrollY,t.addClass("active"),a.addClass("active"),location.pathname!=="/account"&&location.pathname!=="/account/"&&document.body.addClass("modal-open"))}addSection(e){let t=Pe(e);return this.linkListEl.insertBefore(jsx("li",null,t),this.logOutEl),t}},le=class{constructor(){this.containerEl=jsx("dl",{class:"gap-y-3 divide-y divide-solid divide-gray-700 md:divide-y-0 mt-6 text-sm"})}update(e,t){this.fillContainerEl(e,t)}fillContainerEl(e,t){let a=new Date(t.newExpiry-864e5).toLocaleDateString(),r=jsx(jsxFragment,null,e.renew==="monthly"||e.renew==="yearly"?jsx("div",{class:"flex items-center justify-between py-2"},jsx("dt",{class:"font-medium"},"Billing frequency"),jsx("dd",{class:"capitalize"},e.renew)):jsx(jsxFragment,null),jsx("div",{class:"flex items-center justify-between py-2"},jsx("dt",{class:"font-medium max-w-[75%]"},t.desc),jsx("dd",null,"$",v(t.subtotal))),t.discount?jsx("div",{class:"flex items-center justify-between py-2"},jsx("dt",{class:"font-medium"},t.discountDesc),jsx("dd",null,"$",v(t.discount))):jsx(jsxFragment,null),t.tax?jsx("div",{class:"flex items-center justify-between py-2"},jsx("dt",{class:"font-medium cursor-pointer group hover:text-accent flex items-center gap-1",onclick:()=>new re().open()},t.taxDesc," ",jsx("span",{class:"inline-flex items-center text-muted text-sm group-hover:text-accent"},M(ve))),jsx("dd",null,"$",v(t.tax))):jsx(jsxFragment,null),t.creditUsed?jsx("div",{class:"flex items-center justify-between py-2"},jsx("dt",{class:"font-medium"},"Credit"),jsx("dd",null,"-$",v(t.creditUsed))):jsx(jsxFragment,null),jsx("div",{class:"flex items-center justify-between text-white font-semibold pt-4"},jsx("dt",{class:"text-2xl"},"Total"),jsx("dd",{class:"text-2xl"},jsx("span",{class:"text-muted text-sm font-normal"},"USD")," $",v(t.total))),t.renewBeforeDiscount&&t.renewBeforeDiscount!==t.subtotal?jsx("div",{class:"sm:ring-1 sm:ring-gray-700 flex items-center justify-between mt-4 pt-6 sm:p-3 sm:rounded"},jsx("p",{class:"text-xs leading-4 text-muted"},"Your plan will renew at $",v(t.renewBeforeDiscount)," (before tax and discounts) on ",a,", unless canceled before that date.")):jsx(jsxFragment,null));this.containerEl.empty(),this.containerEl.appendChild(r)}},de=class{constructor(e,t){this.paymentDetails=new le,this.mobilePaymentDetails=new le,this.mobileNav=new ie(t);let a=encodeURIComponent(`email: ${t.email}
url: ${location}

`),r=`mailto:support@obsidian.md?subject=${this.getContactUsSubject()}&body=${a}`;e.appendChild(jsx("div",{class:"flex min-h-full flex-col justify-center"},jsx("div",{class:"md:hidden width-full"},jsx("header",{class:"fixed w-full bg-primary z-50 flex items-center mx-auto px-[5%] h-[--header-height] border-b-gray-800 border-b"},jsx("a",{class:"header-logo mr-4 flex items-center gap-x-2 transition-colors -mt-[3px]",href:"/account",innerHTML:He}),this.mobileNav.togglerEl),jsx("div",{class:"header-height"}),this.mobileBreadCrumbsContainer=jsx("div",{class:"mx-auto px-[5%] mt-4 empty:py-0 md:hidden"})),this.mobileNav.navEl,jsx("div",{class:"grow relative grid grid-cols-1 md:grid-cols-12"},jsx("section",{class:"bg-secondary hidden md:block md:border-l md:pl-10 lg:pl-12 md:pr-[12%] border-gray-700 md:col-span-5 md:row-start-1"},jsx("div",{class:"py-6 md:max-w-sm md:sticky md:top-0"},jsx("div",{class:"mx-auto max-w-2xl px-4 md:max-w-none md:px-0"},this.paymentDetails.containerEl),jsx("div",{class:"border-t border-gray-700 text-muted text-xs text-center mt-8 pt-8"},"Need help? ",jsx("a",{href:r,class:"underline"},"Contact us"),"."))),jsx("section",{class:"md:col-start-1 md:col-span-7 md:row-start-1 md:pr-10 lg:pr-12 md:pl-[8.57%]"},jsx("div",{class:"pt-6 md:pt-0 pb-24 md:ml-auto md:w-full md:max-w-xl justify-end"},jsx("div",{class:"mx-auto px-[5%] md:px-0"},jsx("div",{class:"hidden md:block width-full pb-3 mb-6 border-b-gray-700 border-b"},jsx("header",{class:"md:h-[--header-height] flex items-center"},jsx("a",{class:"header-logo mr-4 flex items-center gap-x-2 transition-colors -mt-[3px]",href:"/account",innerHTML:He})),this.desktopBreadCrumbsContainer=jsx("div",{class:"empty:hidden"})),this.mainContent=jsx("div",null),jsx("div",{class:"md:hidden mt-4 mx-auto max-w-2xl"},this.mobilePaymentDetails.containerEl),jsx("div",{class:"message-container mt-4"},this.errorEl=jsx("div",{class:"text-red-400 text-sm text-center p-2 rounded border border-red-900 bg-red-950",style:"display:none"})),this.proceedButton=jsx("button",{onclick:this.handleProceedButtonClick.bind(this),class:"mt-8 relative button text-base button-primary w-full"}),this.footerContent=jsx("div",null))))))),this.mobileNav.addSection(ct),this.mobileNav.addSection(oe),this.mobileNav.addSection(te),this.mobileNav.addSection(ne),this.mobileNav.addSection(se),this.mobileNav.addSection(ae)}addBreadCrumbs(e){this.mobileBreadCrumbsContainer.appendChild(new W(e).containerEl),this.desktopBreadCrumbsContainer.appendChild(new W(e).containerEl)}showError(e){let{errorEl:t}=this;e?(t.empty(),t.setText(e),t.show()):(t.empty(),t.hide())}render(){return f(this,null,function*(){yield this.updatePrice(),this.proceedButton.show()})}updateQueryParam(e,t){let a=new URLSearchParams(location.search.substring(1));a.set(e,t),history.replaceState({},"",`${window.origin}${location.pathname}?${a}${location.hash}`)}updatePrice(){return f(this,null,function*(){let e=this.getPriceData(),t=this.selectedPriceInfo=yield this.getPriceInfo(e);(e.type==="sync"||e.type==="publish")&&(this.updateQueryParam("variation",e.variation),this.updateQueryParam("renew",e.renew)),this.paymentDetails.update(e,t),this.mobilePaymentDetails.update(e,t),this.updateProceedButton()})}getPriceInfo(e){return f(this,null,function*(){return We(e)})}updateProceedButton(){this.setProceedButton(!0,this.selectedPriceInfo.subtotal===0?"Continue":"Proceed to payment")}setProceedButton(e,t){let{proceedButton:a}=this;a.disabled=!e,a.toggleClass("mod-disabled",!e),a.empty(),a.append(jsx("span",null,t))}},ue=class{constructor(e,t,a,r){let o;this.containerEl=jsx("fieldset",{"aria-label":t},jsx("p",{class:"font-medium my-2"},t),o=jsx("div",{class:"-space-y-px rounded-md"}));for(let i=0;i<=a.length-1;i++){let n="";i===0&&(n+="rounded-tl-md rounded-tr-md "),i===a.length-1&&(n+="rounded-bl-md rounded-br-md");let l=a[i],u,D=jsx(jsxFragment,null);l.description&&(D=typeof l.description=="string"?jsx("span",{class:"block text-muted text-sm"},l.description):l.description),o.appendChild(jsx("label",{class:"relative items-center flex cursor-pointer border border-gray-700 p-4 focus:outline-none "+n},u=jsx("input",{type:"radio",name:e,value:l.value,class:"mt-0.5 h-4 w-4 shrink-0 cursor-pointer focus:ring-indigo-600 active:ring-2 active:ring-indigo-600 active:ring-offset-2"}),jsx("span",{class:"ml-3 flex flex-col"},jsx("span",{class:"block text-sm font-medium"},l.label,l.decoration||jsx(jsxFragment,null)),D))),u.addEventListener("change",()=>{r(l.value)})}}getValue(){let e=this.containerEl.querySelector("input:checked");return(e==null?void 0:e.getAttr("value"))||""}setValue(e){let t=this.containerEl.querySelector(`input[value="${e}"]`);t&&t.setAttr("checked",!0)}}});function wt(s,e=!0){let t=Ht[s];if(t)return e?{display:t.display,href:t.href}:{display:t.display}}var yt,vt,Ht,W,Fe=p(()=>{P();Te();x();Le();Ae();De();Ie();B();Re();V();Ne();yt={display:"Account",href:"/account"},vt={display:"Checkout"},Ht={business:te,catalyst:ae,credit:oe,publish:se,sync:ne};W=class{constructor(e){let t=jsx("ol",{role:"list",class:"flex breadcrumbs items-center space-x-1"});for(let a=0;a<e.length;a++){let r=e[a],o=r.href?jsx("a",{href:r.href,class:"font-medium text-normal hover:text-accent"},r.display):jsx("span",{class:"text-sm font-medium text-muted"},r.display);t.appendChild(jsx("li",null,jsx("div",{class:a!==0?"flex items-center space-x-1 text-sm":"flex items-center text-sm"},a!==0?M(ge):jsx(jsxFragment,null),o)))}this.containerEl=jsx("nav",{class:"flex","aria-label":"Breadcrumb"},t)}}});var Nt=At(Et=>{x();Fe();Ne();w();var Oe=class extends de{constructor(e,t){super(e,t),this.addBreadCrumbs([yt,wt("catalyst"),vt]);let a={label:"$25 \xB7 Insider",value:"insider",description:jsx("ul",{class:"text-muted text-sm"},jsx("li",null,"Early access to beta versions"),jsx("li",null,jsx("b",null,"Insider")," community badge"))},r={label:"$50 \xB7 Supporter",value:"supporter",description:jsx("ul",{class:"text-muted text-sm"},jsx("li",null,"Early access to beta versions"),jsx("li",null,"Exclusive Discord channel"),jsx("li",null,jsx("b",null,"Supporter")," community badge"))},o={label:"$100 \xB7 VIP",value:"vip",description:jsx("ul",{class:"text-muted text-sm"},jsx("li",null,"Early access to beta versions"),jsx("li",null,"Exclusive Discord channel"),jsx("li",null,jsx("b",null,"VIP")," community badge"))},i,n;switch(t.license){case"insider":i=[r,o],n="supporter";break;case"supporter":i=[o],n="vip";break;default:i=[a,r,o],n="insider";break}let l=this.tierSelector=new ue("tier","Choose a tier",i,this.updatePrice.bind(this));l.setValue(n),this.mainContent.appendChild(jsx("h2",{class:"text-2xl md:text-xl font-semibold mb-2"},"Become a Catalyst member")),t.license&&this.mainContent.appendChild(jsx("p",{class:"text-muted text-sm py-2"},"Select a tier to upgrade. When upgrading you only need to pay the difference.")),this.mainContent.appendChild(l.containerEl)}handleProceedButtonClick(){let e=new URLSearchParams(G({},this.getPriceData()));window.location.assign("/checkout?"+e)}getPriceData(){return{type:"catalyst",variation:this.tierSelector.getValue(),renew:""}}getContactUsSubject(){return"[Checkout] Catalyst checkout help"}};ready(()=>f(Et,null,function*(){let s;try{s=yield _e()}catch(a){a==="Not logged in"?window.location.replace("/auth?returnto="+encodeURIComponent(qe())):(console.error(a),window.location.assign("/account"));return}if(s.license==="vip"){window.location.assign("/account/catalyst");return}let e=fish("#main");yield new Oe(e,s).render()}))});Nt();})();
/*! Bundled license information:

lucide/dist/esm/createElement.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/defaultAttributes.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/arrow-left.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/briefcase.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/chevron-right.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/coins.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/flame.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/help-circle.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/power.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/refresh-cw.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/send.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/trash-2.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/icons/user-round.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)

lucide/dist/esm/lucide.js:
  (**
   * @license lucide v0.329.0 - ISC
   *
   * This source code is licensed under the ISC license.
   * See the LICENSE file in the root directory of this source tree.
   *)
*/
